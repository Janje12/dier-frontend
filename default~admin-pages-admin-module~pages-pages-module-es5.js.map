{"version":3,"sources":["webpack:///src/app/pages/storage-containers/storage-disposal/storage-disposal.component.ts","webpack:///src/app/pages/storage-containers/storage-disposal/storage-disposal.component.html","webpack:///src/app/pages/storage-containers/storage-cache/storage-cache.component.ts","webpack:///src/app/pages/storage-containers/storage-cache/storage-cache.component.html","webpack:///src/app/@core/service/storage.service.ts","webpack:///src/app/pages/storage-containers/storage-containers.component.ts","webpack:///src/app/pages/storage-containers/storage-containers.component.html","webpack:///src/app/@core/service/toastr.service.ts","webpack:///src/app/pages/storage-containers/storage-disposal/storage-disposal.settings.ts","webpack:///src/app/pages/storage-containers/storage-production/storage-production.settings.ts","webpack:///src/app/@core/data/trash.ts","webpack:///src/app/@core/service/trash.service.ts","webpack:///src/app/@core/data/company.ts","webpack:///src/app/pages/storage-containers/storage.module.ts","webpack:///src/app/pages/storage-containers/storage-edit.settings.ts","webpack:///src/app/pages/storage-containers/storage-treatment/storage-treatment.component.ts","webpack:///src/app/pages/storage-containers/storage-treatment/storage-treatment.component.html","webpack:///src/app/@core/data/storage.ts","webpack:///src/app/pages/storage-containers/storage-meter/storage-meter.component.ts","webpack:///src/app/pages/storage-containers/storage-meter/storage-meter.component.html","webpack:///src/app/pages/storage-containers/storage-treatment/storage-treatment.settings.ts","webpack:///src/app/@core/service/company.service.ts","webpack:///src/app/pages/storage-containers/storage-production/storage-production.component.ts","webpack:///src/app/pages/storage-containers/storage-production/storage-production.component.html","webpack:///src/app/pages/storage-containers/storage-routing.module.ts"],"names":["StorageDisposalComponent","storageService","windowService","trashService","roleService","toastrService","transactionsService","updateStorageEvent","settings","currentSettings","editSettings","editIcon","leftoverTrashCreated","unfinishedTransactions","storageDisposal$","storageDisposal","emit","event","storage","selectedStorageDisposal","action","openAddTrashWindow","data","openDisposeTrashWindow","openLeftoverTrashWindow","trash","selectedTrash","windowRef","open","addTrashTemplate","title","name","trashAmmount","documentNo","companyName","maxAmount","amount","showToast","storageUnit","updateTrash","_id","subscribe","x","updateStorage","close","NaN","disposeTrashTemplate","selectedTransaction","trashCreated","wmdNo","finished","updateTransaction","getUnfinishedTransactions","getCompanyID","leftoverTrashTemplate","selectedStorage","canPass","forEach","indexNumber","undefined","newData","confirm","resolve","err","reject","window","naziv","deleteTrash","StorageCacheComponent","storageCache$","storageCache","selectedStorageCache","StorageService","http","authService","apiUrl","post","value","type","get","patch","companyID","storageType","StorageContainersComponent","allStorage","storageProduction","storageTreatment","loading","getOperations","operations","getCompaniesStorage","s","__t","push","ToastrService","message","status","duration","show","STORAGE_DISPOSAL_SETTINGS","hideSubHeader","actions","columnTitle","position","edit","add","custom","columns","desc","STORAGE_PRODUCTION_SETTINGS","TrashData","TrashService","storageID","increment","inc","CompanyData","StorageModule","STORAGE_EDIT_SETTINGS","confirmSave","editButtonContent","saveButtonContent","cancelButtonContent","confirmDelete","deleteButtonContent","editable","StorageTreatmentComponent","storageTreatment$","selectedStorageTreatment","openProcessTrashWindow","processTrashTemplate","StorageData","StorageMeterComponent","STORAGE_TREATMENT_SETTINGS","CompanyService","company","StorageProductionComponent","storage$","routes","path","component","StorageRoutingModule","forChild"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;ACCE;;AACE;;AACA;;AACE;;AACE;;AACE;;AACE;;AAAsB;;AAAa;;AACrC;;AACA;;AACE;;AAA6B;AAAA;;AAAA;;AAAA;AAAA;;AAAmC;;AAClE;;AACF;;AACF;;AACA;;AACE;;AAAqC;AAAA;;AAAA;;AAAA;;AAAA;AAAA,aAAkC,aAAlC,EAAkC;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAlC,EAAkC,eAAlC,EAAkC;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAlC;;AAGqB;;AAC5D;;AACF;;AACF;;;;;;;;AAnBiB;;AAAA;;AAKe;;AAAA;;AAGwB;;AAAA;;AAKsB;;AAAA,uGAA4B,QAA5B,EAA4B,kCAA5B;;;;;;;;AAU9E;;AACiB;AAAA;;AAAA;;AAAA;AAAA;;AAAwC;;;;;;AADxC,uFAAmB,eAAnB,EAAmB,oBAAnB;;;;;;;;AAMjB;;AACqB;AAAA;;AAAA;;AAAA;AAAA;;AAAgD;;;;;;AADhD;;;;;;;;AAKrB;;AAEsB;AAAA;;AAAA;;AAAA;AAAA;;AAAkD;;;;;;AAFlD,0GAA+B,mBAA/B,EAA+B,cAA/B;;;;UDjBXA,wB;AAwBX,0CAAoBC,cAApB,EAA4DC,aAA5D,EACoBC,YADpB,EACwDC,WADxD,EAEoBC,aAFpB,EAE0DC,mBAF1D,EAEoG;AAAA;;AAFhF,eAAAL,cAAA,GAAAA,cAAA;AAAwC,eAAAC,aAAA,GAAAA,aAAA;AACxC,eAAAC,YAAA,GAAAA,YAAA;AAAoC,eAAAC,WAAA,GAAAA,WAAA;AACpC,eAAAC,aAAA,GAAAA,aAAA;AAAsC,eAAAC,mBAAA,GAAAA,mBAAA;AAdhD,eAAAC,kBAAA,GAAqB,IAAI,0DAAJ,EAArB;AAGV,eAAAC,QAAA,GAAgB,oFAAhB;AACA,eAAAC,eAAA,GAAuB,KAAKD,QAA5B;AACA,eAAAE,YAAA,GAAoB,4EAApB;AACA,eAAAC,QAAA,GAAmB,MAAnB;AAEA,eAAAC,oBAAA,GAAgC,EAAhC;AAEA,eAAAC,sBAAA,GAAwC,EAAxC;AAKC;;;;iBAED,oBAAW;AACT,iBAAKC,gBAAL,GAAwB,gDAAG,KAAKC,eAAR,CAAxB;AACD;;;iBAEO,yBAAa;AACnB,iBAAKR,kBAAL,CAAwBS,IAAxB;AACD;;;iBAED,gBAAI;AACF,gBAAI,KAAKP,eAAL,KAAyB,KAAKC,YAAlC,EAAgD;AAC9C,mBAAKD,eAAL,GAAuB,KAAKC,YAA5B;AACA,mBAAKC,QAAL,GAAgB,OAAhB;AACD,aAHD,MAGO;AACL,mBAAKF,eAAL,GAAuB,KAAKD,QAA5B;AACA,mBAAKG,QAAL,GAAgB,MAAhB;AACD;AACF;;;iBAED,sBAAaM,KAAb,EAAyBC,OAAzB,EAA+C;AAC7C,iBAAKC,uBAAL,GAA+BD,OAA/B;AACA,gBAAID,KAAK,CAACG,MAAN,KAAiB,KAArB,EACE,KAAKC,kBAAL,CAAwBJ,KAAK,CAACK,IAA9B,EADF,KAEK,IAAIL,KAAK,CAACG,MAAN,KAAiB,SAArB,EACH,KAAKG,sBAAL,CAA4BN,KAAK,CAACK,IAAlC,EADG,KAEA,IAAIL,KAAK,CAACG,MAAN,KAAiB,UAArB,EACH,KAAKI,uBAAL,CAA6BP,KAAK,CAACK,IAAnC;AACH;;;iBAEO,4BAAmBG,KAAnB,EAAiC;AACvC,iBAAKC,aAAL,GAAqBD,KAArB;AACA,iBAAKE,SAAL,GAAiB,KAAKzB,aAAL,CAAmB0B,IAAnB,CAAwB,KAAKC,gBAA7B,EACf;AAACC,mBAAK,EAAE,4BAA4B,KAAKJ,aAAL,CAAmBK;AAAvD,aADe,CAAjB;AAED;;;iBAED,8BAA+F;AAAA;;AAAA,gBAAjEC,YAAiE,QAA/EA,YAA+E;AAAA,gBAAvCC,UAAuC,QAAnDA,UAAmD;AAAA,gBAAdC,WAAc,QAA3BA,WAA2B;;AAC7F,gBAAI,KAAKf,uBAAL,CAA6BgB,SAA7B,GAAyC,KAAKhB,uBAAL,CAA6BiB,MAA7B,GAAsCJ,YAAnF,EAAiG;AAC/F,mBAAK3B,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,+EACnC,KAAKlB,uBAAL,CAA6BgB,SADM,GACM,GADN,GACY,KAAKhB,uBAAL,CAA6BmB,WADhF,EAC6F,SAD7F;AAEA;AACD;;AACD,iBAAKZ,aAAL,CAAmBU,MAAnB,IAA6BJ,YAA7B;AACA,iBAAK7B,YAAL,CAAkBoC,WAAlB,CAA8B,KAAKb,aAAnC,EAAkD,KAAKP,uBAAL,CAA6BqB,GAA/E,EAAoF,KAAKd,aAAL,CAAmBc,GAAvG,EAA4G,KAA5G,EACEN,WADF,EACeD,UADf,EAC2BQ,SAD3B,CACqC,UAAAC,CAAC,EAAI;AACxC,mBAAI,CAACC,aAAL;AACD,aAHD;AAKA,iBAAKtC,aAAL,CAAmBgC,SAAnB,CAA6B,OAA7B,EAAsC,wBAAwBL,YAAxB,GAAuC,QAAvC,GAAkD,KAAKN,aAAL,CAAmBK,IAArE,GAA4E,gBAAlH,EACE,SADF;AAEA,iBAAKJ,SAAL,CAAeiB,KAAf;AACAZ,wBAAY,GAAGa,GAAf;AACD;;;iBAEO,gCAAuBpB,KAAvB,EAAqC;AAC3C,iBAAKC,aAAL,GAAqBD,KAArB;AACA,iBAAKE,SAAL,GAAiB,KAAKzB,aAAL,CAAmB0B,IAAnB,CAAwB,KAAKkB,oBAA7B,EACf;AAAChB,mBAAK,EAAE,+BAA+B,KAAKJ,aAAL,CAAmBK;AAA1D,aADe,CAAjB;AAED;;;iBAED,mCAGsB;AAAA;;AAAA,gBAFoBgB,mBAEpB,SAFDA,mBAEC;AAAA,gBADaf,YACb,SADDA,YACC;AAAA,gBADyCgB,YACzC,SAD2BA,YAC3B;;AACpB,gBAAI,KAAK7B,uBAAL,CAA6BiB,MAA7B,GAAsCJ,YAAtC,GAAqD,CAAzD,EAA4D;AAC1D,mBAAK3B,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,2EACnC,KAAKlB,uBAAL,CAA6BiB,MADM,GACG,GADH,GACS,KAAKjB,uBAAL,CAA6BmB,WAD7E,EAC0F,SAD1F;AAEA;AACD;;AACD,iBAAKZ,aAAL,CAAmBU,MAAnB,IAA6BJ,YAA7B;AACA,gBAAME,WAAW,GAAGc,YAAY,GAC7BD,mBAAmB,CAACb,WAApB,GAAkCa,mBAAmB,CAACb,WAAtD,GAAoEa,mBADvC,GAC8D,EAD9F;AAEA,gBAAMd,UAAU,GAAGe,YAAY,GAC5BD,mBAAmB,CAACE,KAApB,GAA4BF,mBAAmB,CAACE,KAAhD,GAAwDF,mBAD5B,GACmD,EADlF;AAEA,iBAAK5C,YAAL,CAAkBoC,WAAlB,CAA8B,KAAKb,aAAnC,EAAkD,KAAKP,uBAAL,CAA6BqB,GAA/E,EACE,KAAKd,aAAL,CAAmBc,GADrB,EAC0B,KAD1B,EAEEN,WAFF,EAEeD,UAFf,EAE2BQ,SAF3B,CAEqC,UAAAC,CAAC,EAAI;AACxC,oBAAI,CAACC,aAAL;AACD,aAJD;;AAKA,gBAAII,mBAAmB,KAAK,GAA5B,EAAiC;AAC/BA,iCAAmB,CAACG,QAApB,GAA+B,IAA/B;AACA,mBAAK5C,mBAAL,CAAyB6C,iBAAzB,CAA2CJ,mBAA3C,EAAgEA,mBAAmB,CAACP,GAApF,EAAyFC,SAAzF,CAAmG,UAAAC,CAAC,EAAI,CACvG,CADD;AAED;;AACD,iBAAKrC,aAAL,CAAmBgC,SAAnB,CAA6B,OAA7B,EAAsC,0BAA0BL,YAA1B,GAAyC,QAAzC,GAClC,KAAKN,aAAL,CAAmBK,IADe,GACR,gBAD9B,EAEE,SAFF;AAGA,iBAAKJ,SAAL,CAAeiB,KAAf;AACAZ,wBAAY,GAAGa,GAAf;AACD;;;iBAED,iCAAwBpB,KAAxB,EAAsC;AAAA;;AACpC,iBAAKC,aAAL,GAAqBD,KAArB;AACA,iBAAKnB,mBAAL,CAAyB8C,yBAAzB,CAAmD,KAAK1B,aAAL,CAAmBc,GAAtE,EAA2E,KAAKpC,WAAL,CAAiBiD,YAAjB,EAA3E,EACGZ,SADH,CACa,UAAAC,CAAC,EAAI;AACd,oBAAI,CAAC7B,sBAAL,GAA8B6B,CAA9B;AACD,aAHH;AAIA,iBAAKf,SAAL,GAAiB,KAAKzB,aAAL,CAAmB0B,IAAnB,CAAwB,KAAK0B,qBAA7B,EACf;AAACxB,mBAAK,EAAE;AAAR,aADe,CAAjB;AAED;;;iBAED,oCAGuB;AAAA;;AAAA,gBAFoBiB,mBAEpB,SAFDA,mBAEC;AAAA,gBAF+DnC,oBAE/D,SAFyCA,oBAEzC;AAAA,gBADgB2C,eAChB,SADDA,eACC;AACrB,gBAAIC,OAAO,GAAG,IAAd;AACA5C,gCAAoB,CAAC6C,OAArB,CAA6B,UAAAT,YAAY,EAAI;AAC3C,kBAAIO,eAAe,CAACpB,SAAhB,GAA4BoB,eAAe,CAACnB,MAAhB,GAAyBY,YAAY,CAACZ,MAAlE,IAA4E,CAACoB,OAAjF,EAA0F;AACxFA,uBAAO,GAAG,KAAV;AACA;AACD;;AACD,oBAAI,CAACrD,YAAL,CAAkBoC,WAAlB,CAA8BS,YAA9B,EAA4CO,eAAe,CAACf,GAA5D,EAAiEQ,YAAY,CAACU,WAA9E,EACE,aADF,EACiBC,SADjB,EAC4BA,SAD5B,EACuC,IADvC,EAC6ClB,SAD7C,CACuD,UAAAC,CAAC,EAAI;AAC1D,sBAAI,CAACC,aAAL;AACD,eAHD;AAID,aATD;;AAUA,gBAAI,CAACa,OAAL,EAAc;AACZ,mBAAKnD,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,+EACnCkB,eAAe,CAACpB,SADmB,GACP,GADO,GACDoB,eAAe,CAACjB,WADtD,EACmE,SADnE;AAEA;AACD;;AACDS,+BAAmB,CAACb,WAApB,GAAkC,IAAlC;AACAa,+BAAmB,CAACE,KAApB,GAA4B,IAA5B;AACAF,+BAAmB,CAACG,QAApB,GAA+B,IAA/B;AACA,iBAAK5C,mBAAL,CAAyB6C,iBAAzB,CAA2CJ,mBAA3C,EAAgEA,mBAAmB,CAACP,GAApF,EAAyFC,SAAzF,CAAmG,UAAAC,CAAC,EAAI,CACvG,CADD;AAEA,iBAAKrC,aAAL,CAAmBgC,SAAnB,CAA6B,OAA7B,EAAsC,4BAAtC,EAAoE,SAApE;AACA,iBAAKV,SAAL,CAAeiB,KAAf;AACD;;;iBAED,4BAAgD1B,OAAhD,EAAoE;AAAA;;AAAA,gBAA9CO,KAA8C,SAAvDmC,OAAuD;AAAA,gBAA9BC,OAA8B,SAAvCA,OAAuC;AAClE,iBAAK1C,uBAAL,GAA+BD,OAA/B;;AACA,gBAAI;AACF,mBAAKf,YAAL,CAAkBoC,WAAlB,CAA8Bd,KAA9B,EAAqC,KAAKN,uBAAL,CAA6BqB,GAAlE,EAAuEf,KAAK,CAACe,GAA7E,EAAkFC,SAAlF,CAA4F,UAAAC,CAAC,EAAI;AAC/F,sBAAI,CAACC,aAAL;AACD,eAFD;AAGAkB,qBAAO,CAACC,OAAR;AACA,mBAAKzD,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,yBAAyBZ,KAAK,CAACM,IAAtE,EAA4E,SAA5E;AACD,aAND,CAME,OAAOgC,GAAP,EAAY;AACZF,qBAAO,CAACG,MAAR;AACA,mBAAK3D,aAAL,CAAmBgC,SAAnB,CAA6B,SAA7B,EAAwC,sDAAsDZ,KAAK,CAACM,IAA5D,GACtC,iCADF,EACqC,QADrC;AAED;AACF;;;iBAED,4BAA6Cb,OAA7C,EAAiE;AAAA;;AAAA,gBAA9CO,KAA8C,SAApDH,IAAoD;AAAA,gBAA9BuC,OAA8B,SAAvCA,OAAuC;AAC/D,iBAAK1C,uBAAL,GAA+BD,OAA/B;AACA,gBAAI,CAAC+C,MAAM,CAACJ,OAAP,CAAe,6CAA6CpC,KAAK,CAACyC,KAAnD,GAA2D,GAA1E,CAAL,EACE;;AACF,gBAAI;AACF,mBAAK/D,YAAL,CAAkBgE,WAAlB,CAA8B,KAAKhD,uBAAL,CAA6BqB,GAA3D,EAAgEf,KAAK,CAACe,GAAtE,EAA2EC,SAA3E,CAAqF,UAAAC,CAAC,EAAI;AACxF,sBAAI,CAACC,aAAL;AACD,eAFD;AAGAkB,qBAAO,CAACC,OAAR;AACA,mBAAKzD,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,0BAA0BZ,KAAK,CAACM,IAAvE,EAA6E,SAA7E;AACD,aAND,CAME,OAAOgC,GAAP,EAAY;AACZF,qBAAO,CAACG,MAAR;AACA,mBAAK3D,aAAL,CAAmBgC,SAAnB,CAA6B,SAA7B,EAAwC,qDAAqDZ,KAAK,CAACM,IAA3D,GACtC,iCADF,EACqC,QADrC;AAED;AACF;;;;;;;yBA3LU/B,wB,EAAwB,6I,EAAA,+H,EAAA,yI,EAAA,uI,EAAA,2I,EAAA,uJ;AAAA,O;;;cAAxBA,wB;AAAwB,qC;AAAA;AAAA;8EACG,yD;;8EACI,yD;;8EACC,yD;;;;;;;;;;;;;;;;;;;;;;;ACtB7C;;AACE;;;;AAqBF;;AAEA;;AAMA;;AAKA;;;;AAlCqB;;AAAA;;;;;;;;;;;;;;;;;;;;;;ACDrB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;ACCE;;AACE;;AACA;;AACE;;AACE;;AACE;;AACE;;AAAsB;;AAAa;;AACrC;;AACA;;AACE;;AAA6B;AAAA;;AAAA;;AAAA;AAAA;;AAAmC;;AAClE;;AACF;;AACF;;AACA;;AACE;;AAAqC;AAAA;;AAAA;;AAAA;;AAAA;AAAA,aAAkC,aAAlC,EAAkC;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAlC,EAAkC,eAAlC,EAAkC;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAlC;;AAGqB;;AAC5D;;AACF;;AACF;;;;;;;;AAnBiB;;AAAA;;AAKe;;AAAA;;AAGwB;;AAAA;;AAKsB;;AAAA,uGAA4B,QAA5B,EAA4B,kCAA5B;;;;;;;;AAU9E;;AAAkE;AAAA;;AAAA;;AAAA;AAAA;;AAAwC;;;;;;AAAzF,oFAAgB,eAAhB,EAAgB,oBAAhB;;;;UDTNoE,qB;AAeX,uCAAoBnE,cAApB,EAA4DC,aAA5D,EACoBC,YADpB,EACwDE,aADxD,EACsF;AAAA;;AADlE,eAAAJ,cAAA,GAAAA,cAAA;AAAwC,eAAAC,aAAA,GAAAA,aAAA;AACxC,eAAAC,YAAA,GAAAA,YAAA;AAAoC,eAAAE,aAAA,GAAAA,aAAA;AAT9C,eAAAE,kBAAA,GAAqB,IAAI,0DAAJ,EAArB;AAGV,eAAAC,QAAA,GAAgB,2GAAhB;AACA,eAAAC,eAAA,GAAuB,KAAKD,QAA5B;AACA,eAAAE,YAAA,GAAoB,4EAApB;AACA,eAAAC,QAAA,GAAmB,MAAnB;AAIC;;;;iBAED,oBAAW;AACT,iBAAK0D,aAAL,GAAqB,gDAAG,KAAKC,YAAR,CAArB;AACD;;;iBAED,yBAAa;AACX,iBAAK/D,kBAAL,CAAwBS,IAAxB;AACA,iBAAKqD,aAAL,GAAqB,gDAAG,KAAKC,YAAR,CAArB;AACD;;;iBAED,gBAAI;AACF,gBAAI,KAAK7D,eAAL,KAAyB,KAAKC,YAAlC,EAAgD;AAC9C,mBAAKD,eAAL,GAAuB,KAAKC,YAA5B;AACA,mBAAKC,QAAL,GAAgB,OAAhB;AACD,aAHD,MAGO;AACL,mBAAKF,eAAL,GAAuB,KAAKD,QAA5B;AACA,mBAAKG,QAAL,GAAgB,MAAhB;AACD;AACF;;;iBAED,sBAAaM,KAAb,EAAyBC,OAAzB,EAAgD;AAC9C,iBAAKqD,oBAAL,GAA4BrD,OAA5B;AACA,gBAAID,KAAK,CAACG,MAAN,KAAiB,KAArB,EACE,KAAKC,kBAAL,CAAwBJ,KAAK,CAACK,IAA9B;AACH;;;iBAEO,4BAAmBG,KAAnB,EAAiC;AACvC,iBAAKC,aAAL,GAAqBD,KAArB;AACA,iBAAKE,SAAL,GAAiB,KAAKzB,aAAL,CAAmB0B,IAAnB,CAAwB,KAAKC,gBAA7B,EACf;AAACC,mBAAK,EAAE,iCAAiC,KAAKJ,aAAL,CAAmBK;AAA5D,aADe,CAAjB;AAED;;;iBAED,+BAA6C;AAAA;;AAAA,gBAAfC,YAAe,SAA7BA,YAA6B;;AAC3C,gBAAI,KAAKuC,oBAAL,CAA0BnC,MAA1B,GAAmCJ,YAAnC,GAAkD,CAAtD,EAAyD;AACvD,mBAAK3B,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,2EACnC,KAAKkC,oBAAL,CAA0BnC,MADS,GACA,GADA,GACM,KAAKmC,oBAAL,CAA0BjC,WADvE,EACoF,SADpF;AAEA;AACD;;AACD,iBAAKZ,aAAL,CAAmBU,MAAnB,IAA6BJ,YAA7B;AACA,iBAAK7B,YAAL,CAAkBoC,WAAlB,CAA8B,KAAKb,aAAnC,EAAkD,KAAK6C,oBAAL,CAA0B/B,GAA5E,EAAiF,KAAKd,aAAL,CAAmBc,GAApG,EACAC,SADA,CACU,UAAAC,CAAC,EAAI;AACb,oBAAI,CAACC,aAAL;AACD,aAHD;AAIA,iBAAKtC,aAAL,CAAmBgC,SAAnB,CAA6B,OAA7B,EAAsC,wBAAwBL,YAAxB,GAAuC,QAAvC,GAAkD,KAAKN,aAAL,CAAmBK,IAArE,GAA4E,gBAAlH,EACE,SADF;AAEA,iBAAKJ,SAAL,CAAeiB,KAAf;AACAZ,wBAAY,GAAGa,GAAf;AACD;;;iBAED,4BAAgD3B,OAAhD,EAAqE;AAAA;;AAAA,gBAA/CO,KAA+C,SAAxDmC,OAAwD;AAAA,gBAA/BC,OAA+B,SAAxCA,OAAwC;AACnE,iBAAKU,oBAAL,GAA4BrD,OAA5B;;AACA,gBAAI;AACF,mBAAKf,YAAL,CAAkBoC,WAAlB,CAA8Bd,KAA9B,EAAqC,KAAK8C,oBAAL,CAA0B/B,GAA/D,EAAoEf,KAAK,CAACe,GAA1E,EAA+EC,SAA/E,CAAyF,UAAAC,CAAC,EAAI;AAC5F,sBAAI,CAACC,aAAL;AACD,eAFD;AAGAkB,qBAAO,CAACC,OAAR;AACA,mBAAKzD,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,yBAAyBZ,KAAK,CAACM,IAAtE,EAA4E,SAA5E;AACD,aAND,CAME,OAAOgC,GAAP,EAAY;AACZF,qBAAO,CAACG,MAAR;AACA,mBAAK3D,aAAL,CAAmBgC,SAAnB,CAA6B,SAA7B,EAAwC,sDAAsDZ,KAAK,CAACM,IAA5D,GACtC,iCADF,EACqC,QADrC;AAED;AACF;;;iBAED,4BAA6Cb,OAA7C,EAAkE;AAAA;;AAAA,gBAA/CO,KAA+C,SAArDH,IAAqD;AAAA,gBAA/BuC,OAA+B,SAAxCA,OAAwC;AAChE,iBAAKU,oBAAL,GAA4BrD,OAA5B;AACA,gBAAI,CAAC+C,MAAM,CAACJ,OAAP,CAAe,6CAA6CpC,KAAK,CAACyC,KAAnD,GAA2D,GAA1E,CAAL,EACE;;AACF,gBAAI;AACF,mBAAK/D,YAAL,CAAkBgE,WAAlB,CAA8B,KAAKI,oBAAL,CAA0B/B,GAAxD,EAA6Df,KAAK,CAACe,GAAnE,EAAwEC,SAAxE,CAAkF,UAAAC,CAAC,EAAI;AACrF,sBAAI,CAACC,aAAL;AACD,eAFD;AAGAkB,qBAAO,CAACC,OAAR;AACA,mBAAKzD,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,0BAA0BZ,KAAK,CAACM,IAAvE,EAA6E,SAA7E;AACD,aAND,CAME,OAAOgC,GAAP,EAAY;AACZF,qBAAO,CAACG,MAAR;AACA,mBAAK3D,aAAL,CAAmBgC,SAAnB,CAA6B,SAA7B,EAAwC,qDAAqDZ,KAAK,CAACM,IAA3D,GACtC,iCADF,EACqC,QADrC;AAED;AACF;;;;;;;yBAjGUqC,qB,EAAqB,6I,EAAA,+H,EAAA,yI,EAAA,2I;AAAA,O;;;cAArBA,qB;AAAqB,sC;AAAA;AAAA;8EACM,yD;;;;;;;;;;;;;;;;;;;;ACjBxC;;AACE;;;;AAqBF;;AAEA;;;;AAvBqB;;AAAA;;;;;;;;;;;;;;;;;;;;;;ACDrB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAQaI,c;;;;;AAGX,gCAAoBC,IAApB,EAA8CC,WAA9C,EAA0E;AAAA;;AAAA;;AACxE;AADkB,kBAAAD,IAAA,GAAAA,IAAA;AAA0B,kBAAAC,WAAA,GAAAA,WAAA;AAE5C,kBAAKC,MAAL,GAAc,sEAAYA,MAA1B;AAFwE;AAGzE;;;;iBAED,uBAAczD,OAAd,EAA8B;AAC5B,mBAAO,KAAKuD,IAAL,CAAUG,IAAV,CAAwB,KAAKD,MAAL,GAAc,cAAtC,EAAsDzD,OAAtD,CAAP;AACD;;;iBAED,uBAAc2D,KAAd,EAAiD;AAAA,gBAApBC,IAAoB,uEAAL,KAAK;AAC/C,mBAAO,KAAKL,IAAL,WAA0B,KAAKE,MAAL,GAAc,mBAAd,aAAuCG,IAAvC,cAA+CD,KAA/C,CAA1B,CAAP;AACD;;;iBAED,oBAAWA,KAAX,EAA8C;AAAA,gBAApBC,IAAoB,uEAAL,KAAK;AAC5C,mBAAO,KAAKL,IAAL,CAAUM,GAAV,CAAuB,KAAKJ,MAAL,GAAc,mBAAd,aAAuCG,IAAvC,cAA+CD,KAA/C,CAAvB,CAAP;AACD;;;iBAED,qBAAYA,KAAZ,EAA2BC,IAA3B,EAAuC;AACrC,mBAAO,KAAKL,IAAL,CAAUM,GAAV,CAAyB,KAAKJ,MAAL,GAAc,oBAAd,aAAwCG,IAAxC,cAAgDD,KAAhD,CAAzB,CAAP;AACD;;;iBAED,uBAAc3D,OAAd,EAAgC2D,KAAhC,EAAmE;AAAA,gBAApBC,IAAoB,uEAAL,KAAK;AACjE,mBAAO,KAAKL,IAAL,CAAUO,KAAV,CAAyB,KAAKL,MAAL,GAAc,mBAAd,aAAuCG,IAAvC,cAA+CD,KAA/C,CAAzB,EAAiF3D,OAAjF,CAAP;AACD;;;iBAED,6BAAoB+D,SAApB,EAAkE;AAAA,gBAA3BC,WAA2B,uEAAL,KAAK;AAChE,mBAAO,KAAKT,IAAL,CAAUM,GAAV,CAAyB,KAAKJ,MAAL,GAAc,wBAAd,aAA4CM,SAA5C,cAAyDC,WAAzD,CAAzB,CAAP;AACD;;;;QA9BiC,yD;;;yBAAvBV,c,EAAc,uH,EAAA,mH;AAAA,O;;;eAAdA,c;AAAc,iBAAdA,cAAc;;;;;;;;;;;;;;;;;ACN3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACDE;;AACE;;AAAkD;AAAA;;AAAA;;AAAA;AAAA;;AAAuC;;AAC3F;;;;;;AADsB;;AAAA;;;;;;;;AAEtB;;AACE;;AACuB;AAAA;;AAAA;;AAAA;AAAA;;AAAuC;;AAChE;;;;;;AAFqB;;AAAA,gHAAqC,SAArC,EAAqC,wBAArC;;;;;;;;AAGrB;;AACE;;AACwB;AAAA;;AAAA;;AAAA;AAAA;;AAAuC;;AACjE;;;;;;AAFgB;;AAAA,8GAAmC,SAAnC,EAAmC,wBAAnC;;;;;;;;AAGhB;;AACE;;AAA6C;AAAA;;AAAA;;AAAA;AAAA;;AAAuC;;AACtF;;;;;;AADiB;;AAAA;;;;UDHNW,0B;AAUX,4CAAoB/E,WAApB,EAAsDH,cAAtD,EAAsF;AAAA;;AAAlE,eAAAG,WAAA,GAAAA,WAAA;AAAkC,eAAAH,cAAA,GAAAA,cAAA;AAPtD,eAAAmF,UAAA,GAAwB,EAAxB;AACA,eAAAC,iBAAA,GAA+B,EAA/B;AACA,eAAAC,gBAAA,GAAuC,EAAvC;AACA,eAAAvE,eAAA,GAAiC,EAAjC;AACA,eAAAuD,YAAA,GAA+B,EAA/B;AACA,eAAAiB,OAAA,GAAmB,KAAnB;AAGC;;;;iBAED,oBAAW;AAAA;;AACT,iBAAKnF,WAAL,CAAiBoF,aAAjB,GAAiC/C,SAAjC,CAA2C,UAAAC,CAAC,EAAI;AAC9C,qBAAI,CAAC+C,UAAL,GAAkB/C,CAAlB;AACD,aAFD;AAGA,iBAAKC,aAAL;AACD;;;iBAED,yBAAgB;AAAA;;AACd,iBAAK4C,OAAL,GAAe,IAAf;AACA,iBAAKH,UAAL,GAAkB,EAAlB;AACA,iBAAKrE,eAAL,GAAuB,EAAvB;AACA,iBAAKsE,iBAAL,GAAyB,EAAzB;AACA,iBAAKC,gBAAL,GAAwB,EAAxB;AACA,iBAAKhB,YAAL,GAAoB,EAApB;AACA,iBAAKrE,cAAL,CAAoByF,mBAApB,CAAyC,KAAKtF,WAAL,CAAiBiD,YAAjB,EAAzC,EAA0EZ,SAA1E,CAAoF,UAAAkD,CAAC,EAAI;AACvF,qBAAI,CAACP,UAAL,GAAkBO,CAAlB;;AADuF,yDAEvE,OAAI,CAACP,UAFkE;AAAA;;AAAA;AAEvF,oEAAiC;AAAA,sBAAtB1C,CAAsB;AAC/B,sBAAIA,CAAC,CAACkD,GAAF,KAAUjC,SAAd,EACE,OAAI,CAAC0B,iBAAL,CAAuBQ,IAAvB,CAA4BnD,CAA5B,EADF,KAEK,IAAIA,CAAC,CAACkD,GAAF,KAAU,kBAAd,EACH,OAAI,CAACN,gBAAL,CAAsBO,IAAtB,CAA6CnD,CAA7C,EADG,KAEA,IAAIA,CAAC,CAACkD,GAAF,KAAU,aAAd,EACH,OAAI,CAAC7E,eAAL,CAAqB8E,IAArB,CAAuCnD,CAAvC,EADG,KAEA,IAAIA,CAAC,CAACkD,GAAF,KAAU,cAAd,EACH,OAAI,CAACtB,YAAL,CAAkBuB,IAAlB,CAAqCnD,CAArC;AACH;AAXsF;AAAA;AAAA;AAAA;AAAA;;AAYvF,qBAAI,CAAC6C,OAAL,GAAe,KAAf;AACD,aAbD;AAcD;;;;;;;yBAzCUJ,0B,EAA0B,uI,EAAA,6I;AAAA,O;;;cAA1BA,0B;AAA0B,iD;AAAA,gB;AAAA,e;AAAA,yP;AAAA;AAAA;ACVvC;;AACE;;AAGA;;AAIA;;AAIA;;AAGF;;;;AAdQ;;AAAA;;AAGA;;AAAA;;AAIA;;AAAA;;AAIA;;AAAA;;;;;;;;;;;;;;;;;;;;;ACXR;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAKaW,a;AAEX,+BAAoBzF,aAApB,EAAoD;AAAA;;AAAhC,eAAAA,aAAA,GAAAA,aAAA;AACnB;;;;iBAED,mBAAUyB,KAAV,EAAyBiE,OAAzB,EAA0CC,MAA1C,EAA8F;AAAA,gBAAzBC,QAAyB,uEAAN,IAAM;AAC5F,iBAAK5F,aAAL,CAAmB6F,IAAnB,CACEH,OADF,EAEEjE,KAFF,EAGE;AAACkE,oBAAM,EAANA,MAAD;AAASC,sBAAQ,EAARA;AAAT,aAHF;AAID;;;;;;;yBAVUH,a,EAAa,sH;AAAA,O;;;eAAbA,a;AAAa,iBAAbA,aAAa,K;AAAA,oBAFZ;;;;;;;;;;;;;;;;;ACJd;AAAA;;;AAAA;AAAA;AAAA;;AAAO,UAAMK,yBAAyB,GAAQ;AAC5CC,qBAAa,EAAE,IAD6B;AAE5CC,eAAO,EAAE;AACPC,qBAAW,EAAE,2CADN;AAEPC,kBAAQ,EAAE,OAFH;AAGPC,cAAI,EAAE,KAHC;AAIPC,aAAG,EAAE,KAJE;AAKP,oBAAQ,KALD;AAMPC,gBAAM,EAAE,CACN;AACE3E,gBAAI,EAAE,KADR;AAEED,iBAAK,EAAE;AAFT,WADM,EAKN;AACEC,gBAAI,EAAE,SADR;AAEED,iBAAK,EAAE;AAFT,WALM,EASN;AACEC,gBAAI,EAAE,UADR;AAEED,iBAAK,EAAE;AAFT,WATM;AAND,SAFmC;AAuB5C6E,eAAO,EAAE;AACPjD,qBAAW,EAAE;AACX5B,iBAAK,EAAE;AADI,WADN;AAIPC,cAAI,EAAE;AACJD,iBAAK,EAAE;AADH,WAJC;AAOP8E,cAAI,EAAE;AACJ9E,iBAAK,EAAE;AADH,WAPC;AAUPM,gBAAM,EAAE;AACNN,iBAAK,EAAE;AADD;AAVD;AAvBmC,OAAvC;;;;;;;;;;;;;;;;ACAP;AAAA;;;AAAA;AAAA;AAAA;;AAAO,UAAM+E,2BAA2B,GAAQ;AAC9CT,qBAAa,EAAE,IAD+B;AAE9CC,eAAO,EAAE;AACPC,qBAAW,EAAE,oBADN;AAEPC,kBAAQ,EAAE,OAFH;AAGPE,aAAG,EAAE,KAHE;AAIPD,cAAI,EAAE,KAJC;AAKP,oBAAQ,KALD;AAMPE,gBAAM,EAAE,CACN;AACE3E,gBAAI,EAAE,KADR;AAEED,iBAAK,EAAE;AAFT,WADM;AAND,SAFqC;AAe9C6E,eAAO,EAAE;AACPjD,qBAAW,EAAE;AACX5B,iBAAK,EAAE;AADI,WADN;AAIPC,cAAI,EAAE;AACJD,iBAAK,EAAE;AADH,WAJC;AAOP8E,cAAI,EAAE;AACJ9E,iBAAK,EAAE;AADH,WAPC;AAUPM,gBAAM,EAAE;AACNN,iBAAK,EAAE;AADD;AAVD;AAfqC,OAAzC;;;;;;;;;;;;;;;;ACiBP;AAAA;;;AAAA;AAAA;AAAA;;UAAsBgF,S;;;;;;;;;;;;;;;;;;;ACjBtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAOaC,Y;;;;;AAGX,8BAAoBtC,IAApB,EAAsC;AAAA;;AAAA;;AACpC;AADkB,kBAAAA,IAAA,GAAAA,IAAA;AAElB,kBAAKE,MAAL,GAAc,sEAAYA,MAA1B;AAFoC;AAGrC;;;;iBAED,qBAAYlD,KAAZ,EAA0BuF,SAA1B,EAA2C;AACzC,mBAAO,KAAKvC,IAAL,CAAUG,IAAV,CAAsB,KAAKD,MAAL,GAAc,YAApC,EAAkD;AAAClD,mBAAK,EAAEA,KAAR;AAAeuF,uBAAS,EAAEA;AAA1B,aAAlD,CAAP;AACD;;;iBAED,qBAAYA,SAAZ,EAA+BnC,KAA/B,EAAkE;AAAA,gBAApBC,IAAoB,uEAAL,KAAK;AAChE,mBAAO,KAAKL,IAAL,WAAwB,KAAKE,MAAL,GAAc,iBAAd,aAAqCG,IAArC,cAA6CD,KAA7C,cAAsDmC,SAAtD,CAAxB,CAAP;AACD;;;iBAED,kBAASnC,KAAT,EAA4C;AAAA,gBAApBC,IAAoB,uEAAL,KAAK;AAC1C,mBAAO,KAAKL,IAAL,CAAUM,GAAV,CAAqB,KAAKJ,MAAL,GAAc,iBAAd,aAAqCG,IAArC,cAA6CD,KAA7C,CAArB,CAAP;AACD;;;iBAED,oBAAWA,KAAX,EAA0BC,IAA1B,EAAsC;AACpC,mBAAO,KAAKL,IAAL,CAAUM,GAAV,CAAuB,KAAKJ,MAAL,GAAc,kBAAd,aAAsCG,IAAtC,cAA8CD,KAA9C,CAAvB,CAAP;AACD;;;iBAED,qBAAYpD,KAAZ,EAA0BuF,SAA1B,EAA6CnC,KAA7C,EAC0E;AAAA,gBADdC,IACc,uEADC,KACD;AAAA,gBAA9D5C,WAA8D;AAAA,gBAAxCD,UAAwC;AAAA,gBAAnBgF,SAAmB;AACxE,mBAAO,KAAKxC,IAAL,CAAUO,KAAV,CAAuB,KAAKL,MAAL,GAAc,iBAAd,aAAqCG,IAArC,cAA6CD,KAA7C,CAAvB,EACL;AAACpD,mBAAK,EAAEA,KAAR;AAAeuF,uBAAS,EAAEA,SAA1B;AAAqC/E,wBAAU,EAAEA,UAAjD;AAA6DC,yBAAW,EAAEA,WAA1E;AAAuFgF,iBAAG,EAAED;AAA5F,aADK,CAAP;AAED;;;;QA5B+B,qD;;;yBAArBF,Y,EAAY,uH;AAAA,O;;;eAAZA,Y;AAAY,iBAAZA,YAAY;;;;;;;;;;;;;;;;;ACuBzB;AAAA;;;AAAA;AAAA;AAAA;;UAAsBI,W;;;;;;;;;;;;;;;;;;;AC7BtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UA+DaC,a;;;;;yBAAAA,a;AAAa,O;;;cAAbA;;;mBATA,CACT,4EADS,EAET,4EAFS,EAGT,sFAHS,C;AAIV,kBAhCQ,CACP,+DADO,EAEP,6EAFO,EAGP,2DAHO,EAIP,mEAJO,EAKP,0DALO,EAMP,4DANO,EAOP,8DAPO,EAQP,2DARO,EASP,6DATO,EAUP,mEAVO,EAWP,6DAXO,EAYP,kEAZO,EAaP,+DAbO,EAcP,2DAdO,EAeP,6DAfO,EAgBP,6DAhBO,EAiBP,gEAjBO,EAkBP,sFAlBO,CAgCR;;;;6HAKUA,a,EAAa;AAAA,yBAhBtB,wFAgBsB,EAftB,2GAesB,EAdtB,yGAcsB,EAbtB,sGAasB,EAZtB,6FAYsB,EAXtB,6FAWsB;AAXD,oBAzBrB,+DAyBqB,EAxBrB,6EAwBqB,EAvBrB,2DAuBqB,EAtBrB,mEAsBqB,EArBrB,0DAqBqB,EApBrB,4DAoBqB,EAnBrB,8DAmBqB,EAlBrB,2DAkBqB,EAjBrB,6DAiBqB,EAhBrB,mEAgBqB,EAfrB,6DAeqB,EAdrB,kEAcqB,EAbrB,+DAaqB,EAZrB,2DAYqB,EAXrB,6DAWqB,EAVrB,6DAUqB,EATrB,gEASqB,EARrB,sFAQqB,CAWC;AAnBJ,oBAgBlB,6FAhBkB;AAmBI,S;AAHD,O;;;;;;;;;;;;;;;;;AC7DzB;AAAA;;;AAAA;AAAA;AAAA;;AAAO,UAAMC,qBAAqB,GAAQ;AACxCb,YAAI,EAAE;AACJc,qBAAW,EAAE,IADT;AAEJC,2BAAiB,EAAE,4BAFf;AAGJC,2BAAiB,EAAE,6BAHf;AAIJC,6BAAmB,EAAE;AAJjB,SADkC;AAOxC,kBAAQ;AACNC,uBAAa,EAAE,IADT;AAENC,6BAAmB,EAAE,6BAFf;AAGNH,2BAAiB,EAAE,MAHb;AAINC,6BAAmB,EAAE;AAJf,SAPgC;AAaxCpB,eAAO,EAAE;AACPE,kBAAQ,EAAE,OADH;AAEPE,aAAG,EAAE,KAFE;AAGPD,cAAI,EAAE,IAHC;AAIP,oBAAQ;AAJD,SAb+B;AAmBxCG,eAAO,EAAE;AACPjD,qBAAW,EAAE;AACX5B,iBAAK,EAAE,eADI;AAEX8F,oBAAQ,EAAE;AAFC,WADN;AAKP7F,cAAI,EAAE;AACJD,iBAAK,EAAE;AADH,WALC;AAQP8E,cAAI,EAAE;AACJ9E,iBAAK,EAAE;AADH,WARC;AAWPM,gBAAM,EAAE;AACNN,iBAAK,EAAE,eADD;AAEN8F,oBAAQ,EAAE;AAFJ;AAXD;AAnB+B,OAAnC;;;;;;;;;;;;;;;;ACAP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;ACCE;;AACE;;AACA;;AACE;;AACE;;AACE;;AACE;;AAAsB;;AAAa;;AACrC;;AACA;;AACE;;AAA6B;AAAA;;AAAA;;AAAA;AAAA;;AAAmC;;AAClE;;AACF;;AACF;;AACA;;AACE;;AAAiB;AAAA;;AAAA;;AAAA;;AAAA;AAAA,aAAkC,aAAlC,EAAkC;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAlC,EAAkC,eAAlC,EAAkC;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAlC;;AAGyC;;AAC5D;;AACF;;AACF;;;;;;;;AAnBiB;;AAAA;;AAKe;;AAAA;;AAGwB;;AAAA;;AAKE;;AAAA,uGAA4B,QAA5B,EAA4B,kCAA5B;;;;;;;;AAS1D;;AACiB;AAAA;;AAAA;;AAAA;AAAA;;AAAwC;;;;;;AADxC,wFAAoB,eAApB,EAAoB,oBAApB;;;;;;;;AAMjB;;AACqB;AAAA;;AAAA;;AAAA;AAAA;;AAAgD;;;;;;AADhD;;;;;;;;AAKrB;;AAEsB;AAAA;;AAAA;;AAAA;AAAA;;AAAkD;;;;;;AAFlD,0GAA+B,mBAA/B,EAA+B,cAA/B;;;;UDhBXC,yB;AAqBX,2CAAoB5H,cAApB,EAA4DC,aAA5D,EACoBC,YADpB,EACwDG,mBADxD,EAEoBD,aAFpB,EAE0DD,WAF1D,EAEoF;AAAA;;AAFhE,eAAAH,cAAA,GAAAA,cAAA;AAAwC,eAAAC,aAAA,GAAAA,aAAA;AACxC,eAAAC,YAAA,GAAAA,YAAA;AAAoC,eAAAG,mBAAA,GAAAA,mBAAA;AACpC,eAAAD,aAAA,GAAAA,aAAA;AAAsC,eAAAD,WAAA,GAAAA,WAAA;AAbhD,eAAAG,kBAAA,GAAqB,IAAI,0DAAJ,EAArB;AAGV,eAAAC,QAAA,GAAgB,sFAAhB;AACA,eAAAC,eAAA,GAAuB,KAAKD,QAA5B;AACA,eAAAE,YAAA,GAAoB,4EAApB;AACA,eAAAC,QAAA,GAAmB,MAAnB;AAEA,eAAAC,oBAAA,GAAgC,EAAhC;AACA,eAAAC,sBAAA,GAAwC,EAAxC;AAKC;;;;iBAED,oBAAW;AACT,iBAAKiH,iBAAL,GAAyB,gDAAG,KAAKxC,gBAAR,CAAzB;AACD;;;iBAEO,yBAAa;AACnB,iBAAK/E,kBAAL,CAAwBS,IAAxB;AACD;;;iBAED,gBAAI;AACF,gBAAI,KAAKP,eAAL,KAAyB,KAAKC,YAAlC,EAAgD;AAC9C,mBAAKD,eAAL,GAAuB,KAAKC,YAA5B;AACA,mBAAKC,QAAL,GAAgB,OAAhB;AACD,aAHD,MAGO;AACL,mBAAKF,eAAL,GAAuB,KAAKD,QAA5B;AACA,mBAAKG,QAAL,GAAgB,MAAhB;AACD;AACF;;;iBAED,sBAAaM,KAAb,EAAyBC,OAAzB,EAAoD;AAClD,iBAAK6G,wBAAL,GAAgC7G,OAAhC;AACA,gBAAID,KAAK,CAACG,MAAN,KAAiB,KAArB,EACE,KAAKC,kBAAL,CAAwBJ,KAAK,CAACK,IAA9B,EADF,KAEK,IAAIL,KAAK,CAACG,MAAN,KAAiB,SAArB,EACH,KAAK4G,sBAAL,CAA4B/G,KAAK,CAACK,IAAlC,EADG,KAEA,IAAIL,KAAK,CAACG,MAAN,KAAiB,UAArB,EACH,KAAKI,uBAAL,CAA6BP,KAAK,CAACK,IAAnC;AACH;;;iBAEO,4BAAmBG,KAAnB,EAAiC;AACvC,iBAAKC,aAAL,GAAqBD,KAArB;AACA,iBAAKE,SAAL,GAAiB,KAAKzB,aAAL,CAAmB0B,IAAnB,CAAwB,KAAKC,gBAA7B,EACf;AAACC,mBAAK,EAAE,4BAA4B,KAAKJ,aAAL,CAAmBK;AAAvD,aADe,CAAjB;AAED;;;iBAED,+BAA+F;AAAA;;AAAA,gBAAjEC,YAAiE,SAA/EA,YAA+E;AAAA,gBAAvCC,UAAuC,SAAnDA,UAAmD;AAAA,gBAAdC,WAAc,SAA3BA,WAA2B;;AAC7F,gBAAI,KAAK6F,wBAAL,CAA8B5F,SAA9B,GAA0C,KAAK4F,wBAAL,CAA8B3F,MAA9B,GAAuCJ,YAArF,EAAmG;AACjG,mBAAK3B,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,+EACnC,KAAK0F,wBAAL,CAA8B5F,SADK,GACO,GADP,GACa,KAAK4F,wBAAL,CAA8BzF,WADlF,EAC+F,SAD/F;AAEA;AACD;;AACD,iBAAKZ,aAAL,CAAmBU,MAAnB,IAA6BJ,YAA7B;AACA,iBAAK7B,YAAL,CAAkBoC,WAAlB,CAA8B,KAAKb,aAAnC,EAAkD,KAAKqG,wBAAL,CAA8BvF,GAAhF,EAAqF,KAAKd,aAAL,CAAmBc,GAAxG,EAA6G,KAA7G,EACEN,WADF,EACeD,UADf,EAC2BQ,SAD3B,CACqC,UAAAC,CAAC,EAAI;AACxC,qBAAI,CAACC,aAAL;AACD,aAHD;AAIA,iBAAKtC,aAAL,CAAmBgC,SAAnB,CAA6B,OAA7B,EACE,wBAAwBL,YAAxB,GAAuC,QAAvC,GAAkD,KAAKN,aAAL,CAAmBK,IAArE,GAA4E,gBAD9E,EAEE,SAFF;AAGA,iBAAKJ,SAAL,CAAeiB,KAAf;AACAZ,wBAAY,GAAGa,GAAf;AACD;;;iBAEO,gCAAuBpB,KAAvB,EAAqC;AAC3C,iBAAKC,aAAL,GAAqBD,KAArB;AACA,iBAAKE,SAAL,GAAiB,KAAKzB,aAAL,CAAmB0B,IAAnB,CAAwB,KAAKqG,oBAA7B,EACf;AAACnG,mBAAK,EAAE,+BAA+B,KAAKJ,aAAL,CAAmBK;AAA1D,aADe,CAAjB;AAED;;;iBAED,oCAGsB;AAAA;;AAAA,gBAFoBgB,mBAEpB,UAFDA,mBAEC;AAAA,gBADaf,YACb,UADDA,YACC;AAAA,gBADyCgB,YACzC,UAD2BA,YAC3B;;AACpB,gBAAI,KAAK+E,wBAAL,CAA8B3F,MAA9B,GAAuCJ,YAAvC,GAAsD,CAA1D,EAA6D;AAC3D,mBAAK3B,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,2EACnC,KAAK0F,wBAAL,CAA8B3F,MADK,GACI,GADJ,GACU,KAAK2F,wBAAL,CAA8BzF,WAD/E,EAC4F,SAD5F;AAEA;AACD;;AACD,iBAAKZ,aAAL,CAAmBU,MAAnB,IAA6BJ,YAA7B;AACA,gBAAME,WAAW,GAAGc,YAAY,GAC7BD,mBAAmB,CAACb,WAApB,GAAkCa,mBAAmB,CAACb,WAAtD,GAAoEa,mBADvC,GAC8D,EAD9F;AAEA,gBAAMd,UAAU,GAAGe,YAAY,GAC5BD,mBAAmB,CAACE,KAApB,GAA4BF,mBAAmB,CAACE,KAAhD,GAAwDF,mBAD5B,GACmD,EADlF;AAEA,iBAAK5C,YAAL,CAAkBoC,WAAlB,CAA8B,KAAKb,aAAnC,EAAkD,KAAKqG,wBAAL,CAA8BvF,GAAhF,EAAqF,KAAKd,aAAL,CAAmBc,GAAxG,EAA6G,KAA7G,EACEN,WADF,EACeD,UADf,EAC2BQ,SAD3B,CACqC,UAAAC,CAAC,EAAI;AACxC,qBAAI,CAACC,aAAL;AACD,aAHD;;AAIA,gBAAII,mBAAmB,KAAK,GAA5B,EAAiC;AAC/BA,iCAAmB,CAACG,QAApB,GAA+B,IAA/B;AACA,mBAAK5C,mBAAL,CAAyB6C,iBAAzB,CAA2CJ,mBAA3C,EAAgEA,mBAAmB,CAACP,GAApF,EAAyFC,SAAzF,CAAmG,UAAAC,CAAC,EAAI,CACvG,CADD;AAED;;AACD,iBAAKrC,aAAL,CAAmBgC,SAAnB,CAA6B,OAA7B,EAAsC,0BAA0BL,YAA1B,GAAyC,QAAzC,GAClC,KAAKN,aAAL,CAAmBK,IADe,GACR,gBAD9B,EAEE,SAFF;AAGA,iBAAKJ,SAAL,CAAeiB,KAAf;AACAZ,wBAAY,GAAGa,GAAf;AACD;;;iBAED,iCAAwBpB,KAAxB,EAAsC;AAAA;;AACpC,iBAAKC,aAAL,GAAqBD,KAArB;AACA,iBAAKnB,mBAAL,CAAyB8C,yBAAzB,CAAmD,KAAK1B,aAAL,CAAmBc,GAAtE,EAA2E,KAAKpC,WAAL,CAAiBiD,YAAjB,EAA3E,EACGZ,SADH,CACa,UAAAC,CAAC,EAAI;AACd,qBAAI,CAAC7B,sBAAL,GAA8B6B,CAA9B;AACD,aAHH;AAIA,iBAAKf,SAAL,GAAiB,KAAKzB,aAAL,CAAmB0B,IAAnB,CAAwB,KAAK0B,qBAA7B,EACf;AAACxB,mBAAK,EAAE;AAAR,aADe,CAAjB;AAED;;;iBAED,qCAGuB;AAAA;;AAAA,gBAFoBiB,mBAEpB,UAFDA,mBAEC;AAAA,gBAF+DnC,oBAE/D,UAFyCA,oBAEzC;AAAA,gBADgB2C,eAChB,UADDA,eACC;AACrB,gBAAIC,OAAO,GAAG,IAAd;AACA5C,gCAAoB,CAAC6C,OAArB,CAA6B,UAAAT,YAAY,EAAI;AAC3C,kBAAIO,eAAe,CAACpB,SAAhB,GAA4BoB,eAAe,CAACnB,MAAhB,GAAyBY,YAAY,CAACZ,MAAlE,IAA4E,CAACoB,OAAjF,EAA0F;AACxFA,uBAAO,GAAG,KAAV;AACA;AACD;;AACD,qBAAI,CAACrD,YAAL,CAAkBoC,WAAlB,CAA8BS,YAA9B,EAA4CO,eAAe,CAACf,GAA5D,EACEQ,YAAY,CAACU,WADf,EAC4B,aAD5B,EAC2CC,SAD3C,EACsDA,SADtD,EACiE,IADjE,EACuElB,SADvE,CACiF,UAAAC,CAAC,EAAI;AACpF,uBAAI,CAACC,aAAL;AACD,eAHD;AAID,aATD;;AAUA,gBAAI,CAACa,OAAL,EAAc;AACZ,mBAAKnD,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,+EACnCkB,eAAe,CAACpB,SADmB,GACP,GADO,GACDoB,eAAe,CAACjB,WADtD,EACmE,SADnE;AAEA;AACD;;AACDS,+BAAmB,CAACb,WAApB,GAAkC,IAAlC;AACAa,+BAAmB,CAACE,KAApB,GAA4B,IAA5B;AACAF,+BAAmB,CAACG,QAApB,GAA+B,IAA/B;AACA,iBAAK5C,mBAAL,CAAyB6C,iBAAzB,CAA2CJ,mBAA3C,EAAgEA,mBAAmB,CAACP,GAApF,EAAyFC,SAAzF,CAAmG,UAAAC,CAAC,EAAI,CACvG,CADD;AAEA,iBAAKrC,aAAL,CAAmBgC,SAAnB,CAA6B,OAA7B,EAAsC,4BAAtC,EAAoE,SAApE;AACA,iBAAKV,SAAL,CAAeiB,KAAf;AACD;;;iBAED,6BAAgD1B,OAAhD,EAAyE;AAAA;;AAAA,gBAAnDO,KAAmD,UAA5DmC,OAA4D;AAAA,gBAAnCC,OAAmC,UAA5CA,OAA4C;AACvE,iBAAKkE,wBAAL,GAAgC7G,OAAhC;;AACA,gBAAI;AACF,mBAAKf,YAAL,CAAkBoC,WAAlB,CAA8Bd,KAA9B,EAAqC,KAAKsG,wBAAL,CAA8BvF,GAAnE,EAAwEf,KAAK,CAACe,GAA9E,EAAmFC,SAAnF,CAA6F,UAAAC,CAAC,EAAI;AAChG,uBAAI,CAACC,aAAL;AACD,eAFD;AAGAkB,qBAAO,CAACC,OAAR;AACA,mBAAKzD,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,yBAAyBZ,KAAK,CAACM,IAAtE,EAA4E,SAA5E;AACD,aAND,CAME,OAAOgC,GAAP,EAAY;AACZF,qBAAO,CAACG,MAAR;AACA,mBAAK3D,aAAL,CAAmBgC,SAAnB,CAA6B,SAA7B,EAAwC,sDAAsDZ,KAAK,CAACM,IAA5D,GACtC,iCADF,EACqC,QADrC;AAED;AACF;;;iBAED,6BAA6Cb,OAA7C,EAAsE;AAAA;;AAAA,gBAAnDO,KAAmD,UAAzDH,IAAyD;AAAA,gBAAnCuC,OAAmC,UAA5CA,OAA4C;AACpE,iBAAKkE,wBAAL,GAAgC7G,OAAhC;AACA,gBAAI,CAAC+C,MAAM,CAACJ,OAAP,CAAe,6CAA6CpC,KAAK,CAACyC,KAAnD,GAA2D,GAA1E,CAAL,EACE;;AACF,gBAAI;AACF,mBAAK/D,YAAL,CAAkBgE,WAAlB,CAA8B,KAAK4D,wBAAL,CAA8BvF,GAA5D,EAAiEf,KAAK,CAACe,GAAvE,EAA4EC,SAA5E,CAAsF,UAAAC,CAAC,EAAI;AACzF,uBAAI,CAACC,aAAL;AACD,eAFD;AAGAkB,qBAAO,CAACC,OAAR;AACA,mBAAKzD,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,0BAA0BZ,KAAK,CAACM,IAAvE,EAA6E,SAA7E;AACD,aAND,CAME,OAAOgC,GAAP,EAAY;AACZF,qBAAO,CAACG,MAAR;AACA,mBAAK3D,aAAL,CAAmBgC,SAAnB,CAA6B,SAA7B,EAAwC,qDAAqDZ,KAAK,CAACM,IAA3D,GACtC,iCADF,EACqC,QADrC;AAED;AACF;;;;;;;yBAvLU8F,yB,EAAyB,6I,EAAA,+H,EAAA,yI,EAAA,uJ,EAAA,2I,EAAA,uI;AAAA,O;;;cAAzBA,yB;AAAyB,0C;AAAA;AAAA;8EACE,yD;;8EACI,yD;;8EACC,yD;;;;;;;;;;;;;;;;;;;;;;;ACtB7C;;AACE;;;;AAqBF;;AACA;;AAMA;;AAKA;;;;AAjCqB;;AAAA;;;;;;;;;;;;;;;;;;;;;;AC6BrB;AAAA;;;AAAA;AAAA;AAAA;;UAAsBK,W;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCrBTC,qB;AAGX,yCAAc;AAAA;AAAG;;;;iBAEjB,oBAAQ,CACP;;;iBAED,2BAAe;AACb,gBAAK,KAAKjH,OAAL,CAAakB,MAAb,GAAsB,KAAKlB,OAAL,CAAaiB,SAApC,GAAiD,GAAjD,GAAuD,EAA3D,EACE,OAAO,SAAP,CADF,KAEK,IAAK,KAAKjB,OAAL,CAAakB,MAAb,GAAsB,KAAKlB,OAAL,CAAaiB,SAApC,GAAiD,GAAjD,GAAuD,EAA3D,EACH,OAAO,SAAP,CADG,KAGH,OAAO,QAAP;AACH;;;iBAED,0BAAc;AACZ,mBAAQ,KAAKjB,OAAL,CAAakB,MAAb,GAAsB,KAAKlB,OAAL,CAAaiB,SAApC,GAAiD,GAAxD;AACD;;;;;;;yBAnBUgG,qB;AAAqB,O;;;cAArBA,qB;AAAqB,sC;AAAA;AAAA;AAAA,S;AAAA,gB;AAAA,e;AAAA,oK;AAAA;AAAA;ACTlC;;AACE;;AACE;;AAAgC;;AAAkE;;AACpG;;AACA;;AACE;;AAEF;;AACF;;;;AANoC;;AAAA;;AAGf;;AAAA,oGAA0B,QAA1B,EAA0B,qBAA1B;;;;;;;;;;;;;;;;;;;;;ACLrB;AAAA;;;AAAA;AAAA;AAAA;;AAAO,UAAMC,0BAA0B,GAAQ;AAC7ChC,qBAAa,EAAE,IAD8B;AAE7CC,eAAO,EAAE;AACPC,qBAAW,EAAE,yCADN;AAEPC,kBAAQ,EAAE,OAFH;AAGPE,aAAG,EAAE,KAHE;AAIPD,cAAI,EAAE,KAJC;AAKP,oBAAQ,KALD;AAMPE,gBAAM,EAAE,CACN;AACE3E,gBAAI,EAAE,KADR;AAEED,iBAAK,EAAE;AAFT,WADM,EAKN;AACEC,gBAAI,EAAE,SADR;AAEED,iBAAK,EAAG;AAFV,WALM,EASN;AACEC,gBAAI,EAAE,UADR;AAEED,iBAAK,EAAE;AAFT,WATM;AAND,SAFoC;AAuB7C6E,eAAO,EAAE;AACPjD,qBAAW,EAAE;AACX5B,iBAAK,EAAE;AADI,WADN;AAIPC,cAAI,EAAE;AACJD,iBAAK,EAAE;AADH,WAJC;AAOP8E,cAAI,EAAE;AACJ9E,iBAAK,EAAE;AADH,WAPC;AAUPM,gBAAM,EAAE;AACNN,iBAAK,EAAE;AADD;AAVD;AAvBoC,OAAxC;;;;;;;;;;;;;;;;ACAP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAOauG,c;;;;;AAGX,gCAAoB5D,IAApB,EAAsC;AAAA;;AAAA;;AACpC;AADkB,kBAAAA,IAAA,GAAAA,IAAA;AAElB,kBAAKE,MAAL,GAAc,sEAAYA,MAA1B;AAFoC;AAGrC;;;;iBAED,uBAAc2D,OAAd,EAA8B;AAC5B,mBAAO,KAAK7D,IAAL,CAAUG,IAAV,CAAwB,KAAKD,MAAL,GAAc,cAAtC,EAAsD2D,OAAtD,CAAP;AACD;;;iBAED,uBAAczD,KAAd,EAAiD;AAAA,gBAApBC,IAAoB,uEAAL,KAAK;AAC/C,mBAAO,KAAKL,IAAL,WAA0B,KAAKE,MAAL,GAAc,mBAAd,aAAuCG,IAAvC,cAA+CD,KAA/C,CAA1B,CAAP;AACD;;;iBAED,oBAAWA,KAAX,EAA8C;AAAA,gBAApBC,IAAoB,uEAAL,KAAK;AAC5C,mBAAO,KAAKL,IAAL,CAAUM,GAAV,CAAuB,KAAKJ,MAAL,GAAc,mBAAd,aAAuCG,IAAvC,cAA+CD,KAA/C,CAAvB,CAAP;AACD;;;iBAED,uBAA+C;AAAA,gBAAnCA,KAAmC,uEAAnB,KAAmB;AAAA,gBAAZC,IAAY;AAC7C,mBAAO,KAAKL,IAAL,CAAUM,GAAV,CAAyB,KAAKJ,MAAL,GAAc,oBAAd,aAAwCG,IAAxC,cAAgDD,KAAhD,CAAzB,CAAP;AACD;;;iBAED,uBAAcyD,OAAd,EAAgCzD,KAAhC,EAAmE;AAAA,gBAApBC,IAAoB,uEAAL,KAAK;AACjE,mBAAO,KAAKL,IAAL,CAAUO,KAAV,CAAyB,KAAKL,MAAL,GAAc,mBAAd,aAAuCG,IAAvC,cAA+CD,KAA/C,CAAzB,EAAiFyD,OAAjF,CAAP;AACD;;;;QA1BiC,yD;;;yBAAvBD,c,EAAc,uH;AAAA,O;;;eAAdA,c;AAAc,iBAAdA,cAAc;;;;;;;;;;;;;;;;;ACP3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;ACCE;;AACE;;AACA;;AACE;;AACE;;AACE;;AACE;;AAAsB;;AAAa;;AACrC;;AACA;;AACE;;AAA6B;AAAA;;AAAA;;AAAA;AAAA;;AAAmC;;AAClE;;AACF;;AACF;;AACA;;AACE;;AAAqC;AAAA;;AAAA;;AAAA;;AAAA;AAAA,aAAkC,aAAlC,EAAkC;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAlC,EAAkC,eAAlC,EAAkC;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAAlC;;AAGqB;;AAC5D;;AACF;;AACF;;;;;;;;AAnBiB;;AAAA;;AAKe;;AAAA;;AAGwB;;AAAA;;AAKsB;;AAAA,uGAA4B,QAA5B,EAA4B,kCAA5B;;;;;;;;AAU9E;;AAAuE;AAAA;;AAAA;;AAAA;AAAA;;AAAwC;;;;;;AAA9F,yFAAqB,eAArB,EAAqB,oBAArB;;;;UDTNE,0B;AAeX,4CAAoBtI,cAApB,EAA4DC,aAA5D,EACoBC,YADpB,EACwDE,aADxD,EACsF;AAAA;;AADlE,eAAAJ,cAAA,GAAAA,cAAA;AAAwC,eAAAC,aAAA,GAAAA,aAAA;AACxC,eAAAC,YAAA,GAAAA,YAAA;AAAoC,eAAAE,aAAA,GAAAA,aAAA;AAT9C,eAAAE,kBAAA,GAAqB,IAAI,0DAAJ,EAArB;AAGV,eAAAC,QAAA,GAAgB,wFAAhB;AACA,eAAAC,eAAA,GAAuB,KAAKD,QAA5B;AACA,eAAAE,YAAA,GAAoB,4EAApB;AACA,eAAAC,QAAA,GAAmB,MAAnB;AAIC;;;;iBAED,oBAAW;AACT,iBAAK6H,QAAL,GAAgB,gDAAG,KAAKtH,OAAR,CAAhB;AACD;;;iBAED,yBAAa;AACX,iBAAKX,kBAAL,CAAwBS,IAAxB;AACA,iBAAKwH,QAAL,GAAgB,gDAAG,KAAKtH,OAAR,CAAhB;AACD;;;iBAED,gBAAI;AACF,gBAAI,KAAKT,eAAL,KAAyB,KAAKC,YAAlC,EAAgD;AAC9C,mBAAKD,eAAL,GAAuB,KAAKC,YAA5B;AACA,mBAAKC,QAAL,GAAgB,OAAhB;AACD,aAHD,MAGO;AACL,mBAAKF,eAAL,GAAuB,KAAKD,QAA5B;AACA,mBAAKG,QAAL,GAAgB,MAAhB;AACD;AACF;;;iBAED,sBAAaM,KAAb,EAAyBC,OAAzB,EAA2C;AACzC,iBAAKqC,eAAL,GAAuBrC,OAAvB;AACA,gBAAID,KAAK,CAACG,MAAN,KAAiB,KAArB,EACE,KAAKC,kBAAL,CAAwBJ,KAAK,CAACK,IAA9B;AACH;;;iBAEO,4BAAmBG,KAAnB,EAAiC;AACvC,iBAAKC,aAAL,GAAqBD,KAArB;AACA,iBAAKE,SAAL,GAAiB,KAAKzB,aAAL,CAAmB0B,IAAnB,CAAwB,KAAKC,gBAA7B,EACf;AAACC,mBAAK,EAAE,iCAAiC,KAAKJ,aAAL,CAAmBK;AAA5D,aADe,CAAjB;AAED;;;iBAED,gCAA6C;AAAA;;AAAA,gBAAfC,YAAe,UAA7BA,YAA6B;;AAC3C,gBAAI,KAAKuB,eAAL,CAAqBpB,SAArB,GAAiC,KAAKoB,eAAL,CAAqBnB,MAArB,GAA8BJ,YAAnE,EAAiF;AAC/E,mBAAK3B,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,+EACnC,KAAKkB,eAAL,CAAqBpB,SADc,GACF,GADE,GACI,KAAKoB,eAAL,CAAqBjB,WADhE,EAC6E,SAD7E;AAEA;AACD;;AACD,iBAAKZ,aAAL,CAAmBU,MAAnB,IAA6BJ,YAA7B;AACA,iBAAK7B,YAAL,CAAkBoC,WAAlB,CAA8B,KAAKb,aAAnC,EAAkD,KAAK6B,eAAL,CAAqBf,GAAvE,EAA4E,KAAKd,aAAL,CAAmBc,GAA/F,EAAoGC,SAApG,CAA8G,UAAAC,CAAC,EAAI;AACjH,qBAAI,CAACC,aAAL;AACD,aAFD;AAGA,iBAAKtC,aAAL,CAAmBgC,SAAnB,CAA6B,OAA7B,EACE,wBAAwBL,YAAxB,GAAuC,QAAvC,GAAkD,KAAKN,aAAL,CAAmBK,IAArE,GAA4E,gBAD9E,EAEE,SAFF;AAGA,iBAAKJ,SAAL,CAAeiB,KAAf;AACAZ,wBAAY,GAAGa,GAAf;AACD;;;iBAED,6BAAgD3B,OAAhD,EAAgE;AAAA;;AAAA,gBAA1CO,KAA0C,UAAnDmC,OAAmD;AAAA,gBAA1BC,OAA0B,UAAnCA,OAAmC;AAC9D,iBAAKN,eAAL,GAAuBrC,OAAvB;;AACA,gBAAI;AACF,mBAAKf,YAAL,CAAkBoC,WAAlB,CAA8Bd,KAA9B,EAAqC,KAAK8B,eAAL,CAAqBf,GAA1D,EAA+Df,KAAK,CAACe,GAArE,EAA0EC,SAA1E,CAAoF,UAAAC,CAAC,EAAI;AACvF,uBAAI,CAACC,aAAL;AACD,eAFD;AAGAkB,qBAAO,CAACC,OAAR;AACA,mBAAKzD,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,yBAAyBZ,KAAK,CAACM,IAAtE,EAA4E,SAA5E;AACD,aAND,CAME,OAAOgC,GAAP,EAAY;AACZF,qBAAO,CAACG,MAAR;AACA,mBAAK3D,aAAL,CAAmBgC,SAAnB,CAA6B,SAA7B,EAAwC,sDAAsDZ,KAAK,CAACM,IAA5D,GACtC,iCADF,EACqC,QADrC;AAED;AACF;;;iBAED,6BAA6Cb,OAA7C,EAA6D;AAAA;;AAAA,gBAA1CO,KAA0C,UAAhDH,IAAgD;AAAA,gBAA1BuC,OAA0B,UAAnCA,OAAmC;AAC3D,iBAAKN,eAAL,GAAuBrC,OAAvB;AACA,gBAAI,CAAC+C,MAAM,CAACJ,OAAP,CAAe,6CAA6CpC,KAAK,CAACM,IAAnD,GAA0D,GAAzE,CAAL,EACE;;AACF,gBAAI;AACA,mBAAK5B,YAAL,CAAkBgE,WAAlB,CAA8B,KAAKZ,eAAL,CAAqBf,GAAnD,EAAwDf,KAAK,CAACe,GAA9D,EAAmEC,SAAnE,CAA6E,UAAAC,CAAC,EAAI;AAChF,uBAAI,CAACC,aAAL;AACD,eAFD;AAGFkB,qBAAO,CAACC,OAAR;AACA,mBAAKzD,aAAL,CAAmBgC,SAAnB,CAA6B,QAA7B,EAAuC,0BAA0BZ,KAAK,CAACyC,KAAvE,EAA8E,SAA9E;AACD,aAND,CAME,OAAOH,GAAP,EAAY;AACZF,qBAAO,CAACG,MAAR;AACA,mBAAK3D,aAAL,CAAmBgC,SAAnB,CAA6B,SAA7B,EAAwC,qDAAqDZ,KAAK,CAACyC,KAA3D,GACtC,iCADF,EACqC,QADrC;AAED;AACF;;;;;;;yBAjGUqE,0B,EAA0B,6I,EAAA,+H,EAAA,yI,EAAA,2I;AAAA,O;;;cAA1BA,0B;AAA0B,2C;AAAA;AAAA;8EACC,yD;;;;;;;;;;;;;;;;;;;;ACjBxC;;AACE;;;;AAqBF;;AAEA;;;;AAvBqB;;AAAA;;;;;;;;;;;;;;;;;;;;;;ACArB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAGA,UAAME,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAWaC,oB;;;;;yBAAAA,oB;AAAoB,O;;;cAApBA;;;kBAHF,CAAC,6DAAaC,QAAb,CAAsBJ,MAAtB,CAAD,C,EACC,4D;;;;4HAECG,oB,EAAoB;AAAA;AAAA,oBAFrB,4DAEqB;AAAA,S;AAFT,O","file":"default~admin-pages-admin-module~pages-pages-module-es5.js","sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output, TemplateRef, ViewChild } from '@angular/core';\r\nimport { NbWindowRef, NbWindowService } from '@nebular/theme';\r\nimport { Observable, of } from 'rxjs';\r\nimport { Trash } from '../../../@core/data/trash';\r\nimport { Storage, StorageDump } from '../../../@core/data/storage';\r\nimport { Transaction } from '../../../@core/data/transaction';\r\nimport { RoleService } from '../../../@core/service/role.service';\r\nimport { ToastrService } from '../../../@core/service/toastr.service';\r\nimport { TrashService } from '../../../@core/service/trash.service';\r\nimport { StorageService } from '../../../@core/service/storage.service';\r\nimport { TransactionsService } from '../../../@core/service/transactions.service';\r\nimport { STORAGE_EDIT_SETTINGS } from '../storage-edit.settings';\r\nimport { STORAGE_DISPOSAL_SETTINGS } from './storage-disposal.settings';\r\n\r\n@Component({\r\n  selector: 'storage-dump',\r\n  templateUrl: './storage-disposal.component.html',\r\n  styleUrls: ['./storage-disposal.component.scss'],\r\n})\r\nexport class StorageDisposalComponent implements OnInit {\r\n  @ViewChild('addTrashTemplate', {read: TemplateRef}) addTrashTemplate: TemplateRef<HTMLElement>;\r\n  @ViewChild('disposeTrashTemplate', {read: TemplateRef}) disposeTrashTemplate: TemplateRef<HTMLElement>;\r\n  @ViewChild('leftoverTrashTemplate', {read: TemplateRef}) leftoverTrashTemplate: TemplateRef<HTMLElement>;\r\n  private windowRef: NbWindowRef;\r\n\r\n  @Input() storageDisposal: StorageDump[];\r\n  storageDisposal$: Observable<StorageDump[]>;\r\n  selectedStorageDisposal: StorageDump;\r\n  @Input() storage: Storage[];\r\n  storage$: Observable<Storage[]>;\r\n  selectedStorage: Storage;\r\n  @Output() updateStorageEvent = new EventEmitter<string>();\r\n  selectedTrash: Trash;\r\n\r\n  settings: any = STORAGE_DISPOSAL_SETTINGS;\r\n  currentSettings: any = this.settings;\r\n  editSettings: any = STORAGE_EDIT_SETTINGS;\r\n  editIcon: string = 'edit';\r\n\r\n  leftoverTrashCreated: Trash[] = [];\r\n  selectedTransaction: Transaction;\r\n  unfinishedTransactions: Transaction[] = [];\r\n\r\n  constructor(private storageService: StorageService, private windowService: NbWindowService,\r\n              private trashService: TrashService, private roleService: RoleService,\r\n              private toastrService: ToastrService, private transactionsService: TransactionsService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.storageDisposal$ = of(this.storageDisposal);\r\n  }\r\n\r\n  private updateStorage(): void {\r\n    this.updateStorageEvent.emit();\r\n  }\r\n\r\n  edit(): void {\r\n    if (this.currentSettings !== this.editSettings) {\r\n      this.currentSettings = this.editSettings;\r\n      this.editIcon = 'close';\r\n    } else {\r\n      this.currentSettings = this.settings;\r\n      this.editIcon = 'edit';\r\n    }\r\n  }\r\n\r\n  chooseAction(event: any, storage: StorageDump) {\r\n    this.selectedStorageDisposal = storage;\r\n    if (event.action === 'add')\r\n      this.openAddTrashWindow(event.data);\r\n    else if (event.action === 'dispose')\r\n      this.openDisposeTrashWindow(event.data);\r\n    else if (event.action === 'leftover')\r\n      this.openLeftoverTrashWindow(event.data);\r\n  }\r\n\r\n  private openAddTrashWindow(trash: Trash) {\r\n    this.selectedTrash = trash;\r\n    this.windowRef = this.windowService.open(this.addTrashTemplate,\r\n      {title: 'Dodaj donetu kolicinu: ' + this.selectedTrash.name});\r\n  }\r\n\r\n  addTrashMethod({trashAmmount: trashAmmount, documentNo: documentNo, companyName: companyName}) {\r\n    if (this.selectedStorageDisposal.maxAmount < this.selectedStorageDisposal.amount + trashAmmount) {\r\n      this.toastrService.showToast('Greška', 'Ne možete da dodate više otpada nego što vaše skladište može da prihvati: '\r\n        + this.selectedStorageDisposal.maxAmount + ' ' + this.selectedStorageDisposal.storageUnit, 'warning');\r\n      return;\r\n    }\r\n    this.selectedTrash.amount += trashAmmount;\r\n    this.trashService.updateTrash(this.selectedTrash, this.selectedStorageDisposal._id, this.selectedTrash._id, '_id',\r\n      companyName, documentNo).subscribe(x => {\r\n      this.updateStorage();\r\n    });\r\n\r\n    this.toastrService.showToast('Uspeh', 'Uspešno ste dodali ' + trashAmmount + ' (kg) ' + this.selectedTrash.name + ' na skladište.',\r\n      'success');\r\n    this.windowRef.close();\r\n    trashAmmount = NaN;\r\n  }\r\n\r\n  private openDisposeTrashWindow(trash: Trash) {\r\n    this.selectedTrash = trash;\r\n    this.windowRef = this.windowService.open(this.disposeTrashTemplate,\r\n      {title: 'Obradi određenu količinu: ' + this.selectedTrash.name});\r\n  }\r\n\r\n  disposeTrashMethod({\r\n                       selectedTransaction: selectedTransaction,\r\n                       trashAmmount: trashAmmount, trashCreated: trashCreated,\r\n                     }) {\r\n    if (this.selectedStorageDisposal.amount - trashAmmount < 0) {\r\n      this.toastrService.showToast('Greška', 'Ne možete da dodate obradite više otpada nego što vaše skladište ima: '\r\n        + this.selectedStorageDisposal.amount + ' ' + this.selectedStorageDisposal.storageUnit, 'warning');\r\n      return;\r\n    }\r\n    this.selectedTrash.amount -= trashAmmount;\r\n    const companyName = trashCreated ?\r\n      (selectedTransaction.companyName ? selectedTransaction.companyName : selectedTransaction) : '';\r\n    const documentNo = trashCreated ?\r\n      (selectedTransaction.wmdNo ? selectedTransaction.wmdNo : selectedTransaction) : '';\r\n    this.trashService.updateTrash(this.selectedTrash, this.selectedStorageDisposal._id,\r\n      this.selectedTrash._id, '_id',\r\n      companyName, documentNo).subscribe(x => {\r\n      this.updateStorage();\r\n    });\r\n    if (selectedTransaction !== '-') {\r\n      selectedTransaction.finished = true;\r\n      this.transactionsService.updateTransaction(selectedTransaction, selectedTransaction._id).subscribe(x => {\r\n      });\r\n    }\r\n    this.toastrService.showToast('Uspeh', 'Uspešno ste obradili ' + trashAmmount + ' (kg) '\r\n      + this.selectedTrash.name + ' na skladište.',\r\n      'success');\r\n    this.windowRef.close();\r\n    trashAmmount = NaN;\r\n  }\r\n\r\n  openLeftoverTrashWindow(trash: Trash) {\r\n    this.selectedTrash = trash;\r\n    this.transactionsService.getUnfinishedTransactions(this.selectedTrash._id, this.roleService.getCompanyID())\r\n      .subscribe(x => {\r\n        this.unfinishedTransactions = x;\r\n      });\r\n    this.windowRef = this.windowService.open(this.leftoverTrashTemplate,\r\n      {title: 'Završi proizvodnju preostalog otpada'});\r\n  }\r\n\r\n  leftoverTrashMethod({\r\n                        selectedTransaction: selectedTransaction, leftoverTrashCreated: leftoverTrashCreated,\r\n                        selectedStorage: selectedStorage,\r\n                      }) {\r\n    let canPass = true;\r\n    leftoverTrashCreated.forEach(trashCreated => {\r\n      if (selectedStorage.maxAmount < selectedStorage.amount + trashCreated.amount || !canPass) {\r\n        canPass = false;\r\n        return;\r\n      }\r\n      this.trashService.updateTrash(trashCreated, selectedStorage._id, trashCreated.indexNumber,\r\n        'indexNumber', undefined, undefined, true).subscribe(x => {\r\n        this.updateStorage();\r\n      });\r\n    });\r\n    if (!canPass) {\r\n      this.toastrService.showToast('Greška', 'Ne možete da dodate više otpada nego što vaše skladište može da prihvati: '\r\n        + selectedStorage.maxAmount + ' ' + selectedStorage.storageUnit, 'warning');\r\n      return;\r\n    }\r\n    selectedTransaction.companyName = null;\r\n    selectedTransaction.wmdNo = null;\r\n    selectedTransaction.finished = true;\r\n    this.transactionsService.updateTransaction(selectedTransaction, selectedTransaction._id).subscribe(x => {\r\n    });\r\n    this.toastrService.showToast('Uspeh', 'Uspesno ste dodali otpade!', 'success');\r\n    this.windowRef.close();\r\n  }\r\n\r\n  updateTrash({newData: trash, confirm: confirm}, storage: StorageDump): void {\r\n    this.selectedStorageDisposal = storage;\r\n    try {\r\n      this.trashService.updateTrash(trash, this.selectedStorageDisposal._id, trash._id).subscribe(x => {\r\n        this.updateStorage();\r\n      });\r\n      confirm.resolve();\r\n      this.toastrService.showToast('Uspeh!', 'Uspešno ste uredili ' + trash.name, 'success');\r\n    } catch (err) {\r\n      confirm.reject();\r\n      this.toastrService.showToast('Greška!', 'Došlo je do greške dok ste pokušali da promenite ' + trash.name +\r\n        '. Molimo vas pokušajte kasnije.', 'danger');\r\n    }\r\n  }\r\n\r\n  deleteTrash({data: trash, confirm: confirm}, storage: StorageDump): void {\r\n    this.selectedStorageDisposal = storage;\r\n    if (!window.confirm('Da li ste sigurni da želite da obrišete ' + trash.naziv + '?'))\r\n      return;\r\n    try {\r\n      this.trashService.deleteTrash(this.selectedStorageDisposal._id, trash._id).subscribe(x => {\r\n        this.updateStorage();\r\n      });\r\n      confirm.resolve();\r\n      this.toastrService.showToast('Uspeh!', 'Uspešno ste obrisali ' + trash.name, 'success');\r\n    } catch (err) {\r\n      confirm.reject();\r\n      this.toastrService.showToast('Greška!', 'Došlo je do greške dok ste pokušali da obrišete ' + trash.name +\r\n        '. Molimo vas pokušajte kasnije.', 'danger');\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"container-fluid\">\r\n  <div *ngFor=\"let s of storageDisposal$ | async;\">\r\n    <storage-meter [storage]=\"s\"></storage-meter>\r\n    <nb-card>\r\n      <nb-card-header>\r\n        <div class=\"row\">\r\n          <div class=\"col-11\">\r\n            <h2 class=\"text-left\">{{ s?.name }}</h2>\r\n          </div>\r\n          <div class=\"col-1 d-flex justify-content-center align-items-center\">\r\n            <nb-icon class=\"edit-button\" (click)=\"edit()\" [icon]=\"editIcon\"></nb-icon>\r\n          </div>\r\n        </div>\r\n      </nb-card-header>\r\n      <nb-card-body>\r\n        <ng2-smart-table class=\"order-table\" (custom)=\"chooseAction($event, s)\" [settings]=\"currentSettings\"\r\n                         [source]=\"s?.trashes\"\r\n                         (editConfirm)=\"updateTrash($event, s)\"\r\n                         (deleteConfirm)=\"deleteTrash($event, s)\"></ng2-smart-table>\r\n      </nb-card-body>\r\n    </nb-card>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #addTrashTemplate>\r\n  <add-trash-popup [type]=\"'disposal'\" [selectedTrash]=\"selectedTrash\"\r\n                   (callAddTrash)=\"addTrashMethod($event)\"></add-trash-popup>\r\n\r\n</ng-template>\r\n\r\n<ng-template #disposeTrashTemplate>\r\n  <process-trash-popup [selectedTrash]=\"selectedTrash\"\r\n                       (callProcessTrash)=\"disposeTrashMethod($event)\"></process-trash-popup>\r\n</ng-template>\r\n\r\n<ng-template #leftoverTrashTemplate>\r\n  <leftover-trash-popup [selectedTrash]=\"selectedTrash\"\r\n                        [storageProduction]=\"storage\"\r\n                        (callLeftoverTrash)=\"leftoverTrashMethod($event)\"></leftover-trash-popup>\r\n</ng-template>\r\n","import { Component, EventEmitter, Input, OnInit, Output, TemplateRef, ViewChild } from '@angular/core';\r\nimport { NbWindowRef, NbWindowService } from '@nebular/theme';\r\nimport { Observable, of } from 'rxjs';\r\nimport { Trash } from '../../../@core/data/trash';\r\nimport { StorageCache } from '../../../@core/data/storage';\r\nimport { ToastrService } from '../../../@core/service/toastr.service';\r\nimport { TrashService } from '../../../@core/service/trash.service';\r\nimport { StorageService } from '../../../@core/service/storage.service';\r\nimport { STORAGE_EDIT_SETTINGS } from '../storage-edit.settings';\r\nimport { STORAGE_PRODUCTION_SETTINGS } from '../storage-production/storage-production.settings';\r\n\r\n@Component({\r\n  selector: 'storage-cache',\r\n  templateUrl: './storage-cache.component.html',\r\n  styleUrls: ['./storage-cache.component.scss'],\r\n})\r\nexport class StorageCacheComponent implements OnInit {\r\n  @ViewChild('addTrashTemplate', {read: TemplateRef}) addTrashTemplate: TemplateRef<HTMLElement>;\r\n  private windowRef: NbWindowRef;\r\n\r\n  @Input() storageCache: StorageCache[];\r\n  storageCache$: Observable<StorageCache[]>;\r\n  selectedStorageCache: StorageCache;\r\n  @Output() updateStorageEvent = new EventEmitter<string>();\r\n  selectedTrash: Trash;\r\n\r\n  settings: any = STORAGE_PRODUCTION_SETTINGS;\r\n  currentSettings: any = this.settings;\r\n  editSettings: any = STORAGE_EDIT_SETTINGS;\r\n  editIcon: string = 'edit';\r\n\r\n  constructor(private storageService: StorageService, private windowService: NbWindowService,\r\n              private trashService: TrashService, private toastrService: ToastrService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.storageCache$ = of(this.storageCache);\r\n  }\r\n\r\n  updateStorage(): void {\r\n    this.updateStorageEvent.emit();\r\n    this.storageCache$ = of(this.storageCache);\r\n  }\r\n\r\n  edit(): void {\r\n    if (this.currentSettings !== this.editSettings) {\r\n      this.currentSettings = this.editSettings;\r\n      this.editIcon = 'close';\r\n    } else {\r\n      this.currentSettings = this.settings;\r\n      this.editIcon = 'edit';\r\n    }\r\n  }\r\n\r\n  chooseAction(event: any, storage: StorageCache) {\r\n    this.selectedStorageCache = storage;\r\n    if (event.action === 'add')\r\n      this.openAddTrashWindow(event.data);\r\n  }\r\n\r\n  private openAddTrashWindow(trash: Trash) {\r\n    this.selectedTrash = trash;\r\n    this.windowRef = this.windowService.open(this.addTrashTemplate,\r\n      {title: 'Dodaj proizvedenu kolicinu: ' + this.selectedTrash.name});\r\n  }\r\n\r\n  addTrashMethod({trashAmmount: trashAmmount}) {\r\n    if (this.selectedStorageCache.amount - trashAmmount < 0) {\r\n      this.toastrService.showToast('Greška', 'Ne možete da dodate obradite više otpada nego što vaše skladište ima: '\r\n        + this.selectedStorageCache.amount + ' ' + this.selectedStorageCache.storageUnit, 'warning');\r\n      return;\r\n    }\r\n    this.selectedTrash.amount += trashAmmount;\r\n    this.trashService.updateTrash(this.selectedTrash, this.selectedStorageCache._id, this.selectedTrash._id).\r\n    subscribe(x => {\r\n      this.updateStorage();\r\n    });\r\n    this.toastrService.showToast('Uspeh', 'Uspešno ste dodali ' + trashAmmount + ' (kg) ' + this.selectedTrash.name + ' na skladište.',\r\n      'success');\r\n    this.windowRef.close();\r\n    trashAmmount = NaN;\r\n  }\r\n\r\n  updateTrash({newData: trash, confirm: confirm}, storage: StorageCache): void {\r\n    this.selectedStorageCache = storage;\r\n    try {\r\n      this.trashService.updateTrash(trash, this.selectedStorageCache._id, trash._id).subscribe(x => {\r\n        this.updateStorage();\r\n      });\r\n      confirm.resolve();\r\n      this.toastrService.showToast('Uspeh!', 'Uspešno ste uredili ' + trash.name, 'success');\r\n    } catch (err) {\r\n      confirm.reject();\r\n      this.toastrService.showToast('Greška!', 'Došlo je do greške dok ste pokušali da promenite ' + trash.name +\r\n        '. Molimo vas pokušajte kasnije.', 'danger');\r\n    }\r\n  }\r\n\r\n  deleteTrash({data: trash, confirm: confirm}, storage: StorageCache): void {\r\n    this.selectedStorageCache = storage;\r\n    if (!window.confirm('Da li ste sigurni da želite da obrišete ' + trash.naziv + '?'))\r\n      return;\r\n    try {\r\n      this.trashService.deleteTrash(this.selectedStorageCache._id, trash._id).subscribe(x => {\r\n        this.updateStorage();\r\n      });\r\n      confirm.resolve();\r\n      this.toastrService.showToast('Uspeh!', 'Uspešno ste obrisali ' + trash.name, 'success');\r\n    } catch (err) {\r\n      confirm.reject();\r\n      this.toastrService.showToast('Greška!', 'Došlo je do greške dok ste pokušali da obrišete ' + trash.name +\r\n        '. Molimo vas pokušajte kasnije.', 'danger');\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"container-fluid\">\r\n  <div *ngFor=\"let s of storageCache$ | async\">\r\n    <storage-meter [storage]=\"s\"></storage-meter>\r\n    <nb-card>\r\n      <nb-card-header>\r\n        <div class=\"row\">\r\n          <div class=\"col-11\">\r\n            <h2 class=\"text-left\">{{ s?.name }}</h2>\r\n          </div>\r\n          <div class=\"col-1 d-flex justify-content-center align-items-center\">\r\n            <nb-icon class=\"edit-button\" (click)=\"edit()\" [icon]=\"editIcon\"></nb-icon>\r\n          </div>\r\n        </div>\r\n      </nb-card-header>\r\n      <nb-card-body>\r\n        <ng2-smart-table class=\"order-table\" (custom)=\"chooseAction($event, s)\" [settings]=\"currentSettings\"\r\n                         [source]=\"s?.trashes\"\r\n                         (editConfirm)=\"updateTrash($event, s)\"\r\n                         (deleteConfirm)=\"deleteTrash($event, s)\"></ng2-smart-table>\r\n      </nb-card-body>\r\n    </nb-card>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #addTrashTemplate>\r\n  <add-trash-popup [type]=\"'cache'\" [selectedTrash]=\"selectedTrash\" (callAddTrash)=\"addTrashMethod($event)\"></add-trash-popup>\r\n</ng-template>\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { NbAuthService } from '@nebular/auth';\r\nimport { Observable } from 'rxjs';\r\nimport { Injectable } from '@angular/core';\r\nimport { environment } from '../../../environments/environment';\r\nimport { Storage, StorageData } from '../data/storage';\r\n\r\n@Injectable()\r\nexport class StorageService extends StorageData {\r\n  private readonly apiUrl: string;\r\n\r\n  constructor(private http: HttpClient, private authService: NbAuthService) {\r\n    super();\r\n    this.apiUrl = environment.apiUrl;\r\n  }\r\n\r\n  createStorage(storage: Storage): Observable<Storage> {\r\n    return this.http.post<Storage>(this.apiUrl + '/api/storage', storage);\r\n  }\r\n\r\n  deleteStorage(value: string, type: string = '_id'): Observable<Storage> {\r\n    return this.http.delete<Storage>(this.apiUrl + '/api/storage/one/' + `${type}/${value}`);\r\n  }\r\n\r\n  getStorage(value: string, type: string = '_id'): Observable<Storage> {\r\n    return this.http.get<Storage>(this.apiUrl + '/api/storage/one/' + `${type}/${value}`);\r\n  }\r\n\r\n  getStorages(value: string, type: string): Observable<Storage[]> {\r\n    return this.http.get<Storage[]>(this.apiUrl + '/api/storage/many/' + `${type}/${value}`);\r\n  }\r\n\r\n  updateStorage(storage: Storage, value: string, type: string = '_id'): Observable<Storage> {\r\n    return this.http.patch<Storage>(this.apiUrl + '/api/storage/one/' + `${type}/${value}`, storage);\r\n  }\r\n\r\n  getCompaniesStorage(companyID: string, storageType: string = 'all'): Observable<Storage[]> {\r\n    return this.http.get<Storage[]>(this.apiUrl + '/api/company/storages/' + `${companyID}/${storageType}`);\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Storage, StorageCache, StorageDump, StorageTreatment } from '../../@core/data/storage';\r\nimport { RoleService } from '../../@core/service/role.service';\r\nimport { StorageService } from '../../@core/service/storage.service';\r\n\r\n@Component({\r\n  selector: 'pages-storage-containers',\r\n  templateUrl: './storage-containers.component.html',\r\n  styleUrls: ['./storage-containers.component.css'],\r\n})\r\nexport class StorageContainersComponent implements OnInit {\r\n\r\n  operations: { production: false, transport: false, treatment: false, disposal: false, cache: false };\r\n  allStorage: Storage[] = [];\r\n  storageProduction: Storage[] = [];\r\n  storageTreatment: StorageTreatment[] = [];\r\n  storageDisposal: StorageDump[] = [];\r\n  storageCache: StorageCache[] = [];\r\n  loading: boolean = false;\r\n\r\n  constructor(private roleService: RoleService, private storageService: StorageService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.roleService.getOperations().subscribe(x => {\r\n      this.operations = x;\r\n    });\r\n    this.updateStorage();\r\n  }\r\n\r\n  updateStorage() {\r\n    this.loading = true;\r\n    this.allStorage = [];\r\n    this.storageDisposal = [];\r\n    this.storageProduction = [];\r\n    this.storageTreatment = [];\r\n    this.storageCache = [];\r\n    this.storageService.getCompaniesStorage( this.roleService.getCompanyID()).subscribe(s => {\r\n      this.allStorage = s;\r\n      for (const x of this.allStorage) {\r\n        if (x.__t === undefined)\r\n          this.storageProduction.push(x);\r\n        else if (x.__t === 'StorageTreatment')\r\n          this.storageTreatment.push(<StorageTreatment>x);\r\n        else if (x.__t === 'StorageDump')\r\n          this.storageDisposal.push(<StorageDump>x);\r\n        else if (x.__t === 'StorageCache')\r\n          this.storageCache.push(<StorageCache>x);\r\n      }\r\n      this.loading = false;\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"container-fluid\">\r\n  <div *ngIf=\"operations.production && !loading\">\r\n    <storage-production [storage]=\"storageProduction\" (updateStorageEvent)=\"updateStorage()\"></storage-production>\r\n  </div>\r\n  <div *ngIf=\"operations.treatment && !loading\">\r\n    <storage-treatment [storageTreatment]=\"storageTreatment\" [storage]=\"storageProduction\"\r\n                           (updateStorageEvent)=\"updateStorage()\"></storage-treatment>\r\n  </div>\r\n  <div *ngIf=\"operations.disposal && !loading\">\r\n    <storage-dump [storageDisposal]=\"storageDisposal\" [storage]=\"storageProduction\"\r\n                            (updateStorageEvent)=\"updateStorage()\"></storage-dump>\r\n  </div>\r\n  <div *ngIf=\"operations.cache && !loading\">\r\n    <storage-cache [storageCache]=\"storageCache\" (updateStorageEvent)=\"updateStorage()\"></storage-cache>\r\n  </div>\r\n</div>\r\n","import { Injectable } from '@angular/core';\r\nimport { NbComponentStatus, NbToastrService } from '@nebular/theme';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ToastrService {\r\n\r\n  constructor(private toastrService: NbToastrService) {\r\n  }\r\n\r\n  showToast(title: String, message: String, status: NbComponentStatus, duration: number = 3000) {\r\n    this.toastrService.show(\r\n      message,\r\n      title,\r\n      {status, duration});\r\n  }\r\n\r\n}\r\n","export const STORAGE_DISPOSAL_SETTINGS: any = {\r\n  hideSubHeader: true,\r\n  actions: {\r\n    columnTitle: 'Dodaj otpad/Odloži otpad/Završi odlaganje',\r\n    position: 'right',\r\n    edit: false,\r\n    add: false,\r\n    delete: false,\r\n    custom: [\r\n      {\r\n        name: 'add',\r\n        title: '<i class=\"fa fa-plus\"></i>',\r\n      },\r\n      {\r\n        name: 'dispose',\r\n        title: '<i class=\"fa fa-trash-alt\"></i>',\r\n      },\r\n      {\r\n        name: 'leftover',\r\n        title: '<i class=\"fa fa-exclamation-triangle\"></i>',\r\n      },\r\n    ],\r\n  },\r\n  columns: {\r\n    indexNumber: {\r\n      title: 'Indeksni Broj',\r\n    },\r\n    name: {\r\n      title: 'Naziv',\r\n    },\r\n    desc: {\r\n      title: 'Opis',\r\n    },\r\n    amount: {\r\n      title: 'Količina (KG)',\r\n    },\r\n  },\r\n};\r\n","export const STORAGE_PRODUCTION_SETTINGS: any = {\r\n  hideSubHeader: true,\r\n  actions: {\r\n    columnTitle: 'Dodaj na skladište',\r\n    position: 'right',\r\n    add: false,\r\n    edit: false,\r\n    delete: false,\r\n    custom: [\r\n      {\r\n        name: 'add',\r\n        title: '<i class=\"fa fa-folder-plus\"></i>',\r\n      },\r\n    ],\r\n  },\r\n  columns: {\r\n    indexNumber: {\r\n      title: 'Indeksni Broj',\r\n    },\r\n    name: {\r\n      title: 'Naziv',\r\n    },\r\n    desc: {\r\n      title: 'Opis',\r\n    },\r\n    amount: {\r\n      title: 'Količina (kg)',\r\n    },\r\n  },\r\n};\r\n","import { Observable } from 'rxjs';\r\n\r\nexport interface Trash {\r\n  _id?: string;\r\n  indexNumber: string;\r\n  name: string;\r\n  desc: string;\r\n  amount: number;\r\n  state?: string;\r\n  qList?: string;\r\n  packaging?: string;\r\n  rSign?: string;\r\n  dSign?: string;\r\n  examinationCode?: string;\r\n  examinationDate?: Date;\r\n}\r\n\r\nexport abstract class TrashData {\r\n  abstract createTrash(trash: Trash, storageID: string): Observable<Trash>;\r\n  abstract getTrash(value: string, type: string): Observable<Trash>;\r\n  abstract getTrashes(value: string, type: string): Observable<Trash[]>;\r\n  abstract updateTrash(trash: Trash, value: string, type: string): Observable<Trash>;\r\n  abstract deleteTrash(value: string, type: string): Observable<Trash>;\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { Injectable } from '@angular/core';\r\nimport { environment } from '../../../environments/environment';\r\nimport { Trash, TrashData } from '../data/trash';\r\n\r\n@Injectable()\r\nexport class TrashService extends TrashData {\r\n  private readonly apiUrl: string;\r\n\r\n  constructor(private http: HttpClient) {\r\n    super();\r\n    this.apiUrl = environment.apiUrl;\r\n  }\r\n\r\n  createTrash(trash: Trash, storageID: string): Observable<Trash> {\r\n    return this.http.post<Trash>(this.apiUrl + '/api/trash', {trash: trash, storageID: storageID});\r\n  }\r\n\r\n  deleteTrash(storageID: string, value: string, type: string = '_id'): Observable<Trash> {\r\n    return this.http.delete<Trash>(this.apiUrl + '/api/trash/one/' + `${type}/${value}/${storageID}`);\r\n  }\r\n\r\n  getTrash(value: string, type: string = '_id'): Observable<Trash> {\r\n    return this.http.get<Trash>(this.apiUrl + '/api/trash/one/' + `${type}/${value}`);\r\n  }\r\n\r\n  getTrashes(value: string, type: string): Observable<Trash[]> {\r\n    return this.http.get<Trash[]>(this.apiUrl + '/api/trash/many/' + `${type}/${value}`);\r\n  }\r\n\r\n  updateTrash(trash: Trash, storageID: string, value: string, type: string = '_id',\r\n              companyName?: string, documentNo?: string, increment?: boolean): Observable<Trash> {\r\n    return this.http.patch<Trash>(this.apiUrl + '/api/trash/one/' + `${type}/${value}`,\r\n      {trash: trash, storageID: storageID, documentNo: documentNo, companyName: companyName, inc: increment});\r\n  }\r\n\r\n}\r\n","import { Observable } from 'rxjs';\r\nimport { Occupation } from './occupation';\r\nimport { Permit } from './permit';\r\nimport { CompanyClient } from './companyClient';\r\nimport { SpecialWaste } from './specialWaste';\r\nimport { Storage } from './storage';\r\nimport { Vehicle } from './vehicle';\r\n\r\nexport interface Company extends CompanyClient {\r\n  manager: string;\r\n  emailReception: string;\r\n  legalRep: {\r\n    firstName: string;\r\n    lastName: string;\r\n  };\r\n  nriz: {\r\n    username: string;\r\n    password: string;\r\n  };\r\n  wasteManager?: {\r\n    firstName: string;\r\n    lastName: string;\r\n  };\r\n  occupation: Occupation;\r\n  permits?: Permit[];\r\n  storages?: Storage[];\r\n  specialWastes?: SpecialWaste[];\r\n  vehicles?: Vehicle[];\r\n}\r\n\r\nexport abstract class CompanyData {\r\n  abstract createCompany(company: Company): Observable<Company>;\r\n  abstract getCompany(value: string, type: string): Observable<Company>;\r\n  abstract getCompanys(value: string, type: string): Observable<Company[]>;\r\n  abstract updateCompany(company: Company, value: string, type: string): Observable<Company>;\r\n  abstract deleteCompany(value: string, type: string): Observable<Company>;\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CatalogService } from '../../@core/service/catalog.service';\r\nimport { RoleService } from '../../@core/service/role.service';\r\nimport { TransactionsService } from '../../@core/service/transactions.service';\r\nimport { ThemeModule } from '../../@theme/theme.module';\r\nimport { PopupWindowsModule } from '../popup-windows/popup-windows.module';\r\nimport { StorageContainersComponent } from './storage-containers.component';\r\nimport { StorageService } from '../../@core/service/storage.service';\r\nimport {\r\n  NbAccordionModule,\r\n  NbAutocompleteModule, NbButtonModule,\r\n  NbCardModule, NbCheckboxModule, NbIconModule,\r\n  NbInputModule, NbLayoutModule,\r\n  NbListModule,\r\n  NbPopoverModule, NbProgressBarModule,\r\n  NbSelectModule, NbToggleModule,\r\n} from '@nebular/theme';\r\nimport { Ng2SmartTableModule } from 'ng2-smart-table';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { StorageProductionComponent } from './storage-production/storage-production.component';\r\nimport { StorageRoutingModule } from './storage-routing.module';\r\nimport { StorageTreatmentComponent } from './storage-treatment/storage-treatment.component';\r\nimport { StorageDisposalComponent } from './storage-disposal/storage-disposal.component';\r\nimport { StorageCacheComponent } from './storage-cache/storage-cache.component';\r\nimport { StorageMeterComponent } from './storage-meter/storage-meter.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    ThemeModule,\r\n    StorageRoutingModule,\r\n    NbCardModule,\r\n    Ng2SmartTableModule,\r\n    FormsModule,\r\n    NbInputModule,\r\n    NbPopoverModule,\r\n    NbListModule,\r\n    NbSelectModule,\r\n    NbAutocompleteModule,\r\n    NbButtonModule,\r\n    NbProgressBarModule,\r\n    NbCheckboxModule,\r\n    NbIconModule,\r\n    NbLayoutModule,\r\n    NbToggleModule,\r\n    NbAccordionModule,\r\n    PopupWindowsModule,\r\n  ],\r\n  declarations: [\r\n    StorageContainersComponent,\r\n    StorageProductionComponent,\r\n    StorageTreatmentComponent,\r\n    StorageDisposalComponent,\r\n    StorageCacheComponent,\r\n    StorageMeterComponent,\r\n  ],\r\n  providers: [\r\n    StorageService,\r\n    CatalogService,\r\n    TransactionsService,\r\n  ],\r\n  exports: [\r\n    StorageMeterComponent,\r\n  ],\r\n})\r\nexport class StorageModule {\r\n}\r\n","export const STORAGE_EDIT_SETTINGS: any = {\r\n  edit: {\r\n    confirmSave: true,\r\n    editButtonContent: '<i class=\"fa fa-edit\"></i>',\r\n    saveButtonContent: '<i class=\"fa fa-check\"></i>',\r\n    cancelButtonContent: '<i class=\"fa fa-times\"></i>',\r\n  },\r\n  delete: {\r\n    confirmDelete: true,\r\n    deleteButtonContent: '<i class=\"fa fa-trash\"></i>',\r\n    saveButtonContent: 'save',\r\n    cancelButtonContent: 'cancel',\r\n  },\r\n  actions: {\r\n    position: 'right',\r\n    add: false,\r\n    edit: true,\r\n    delete: true,\r\n  },\r\n  columns: {\r\n    indexNumber: {\r\n      title: 'Indeksni Broj',\r\n      editable: false,\r\n    },\r\n    name: {\r\n      title: 'Naziv',\r\n    },\r\n    desc: {\r\n      title: 'Opis',\r\n    },\r\n    amount: {\r\n      title: 'Količina (kg)',\r\n      editable: false,\r\n    },\r\n  },\r\n};\r\n","import { Component, EventEmitter, Input, OnInit, Output, TemplateRef, ViewChild } from '@angular/core';\r\nimport { NbWindowRef, NbWindowService } from '@nebular/theme';\r\nimport { Observable, of } from 'rxjs';\r\nimport { Trash } from '../../../@core/data/trash';\r\nimport { Storage, StorageTreatment } from '../../../@core/data/storage';\r\nimport { Transaction } from '../../../@core/data/transaction';\r\nimport { RoleService } from '../../../@core/service/role.service';\r\nimport { ToastrService } from '../../../@core/service/toastr.service';\r\nimport { TrashService } from '../../../@core/service/trash.service';\r\nimport { StorageService } from '../../../@core/service/storage.service';\r\nimport { TransactionsService } from '../../../@core/service/transactions.service';\r\nimport { STORAGE_EDIT_SETTINGS } from '../storage-edit.settings';\r\nimport { STORAGE_TREATMENT_SETTINGS } from './storage-treatment.settings';\r\n\r\n@Component({\r\n  selector: 'storage-treatment',\r\n  templateUrl: './storage-treatment.component.html',\r\n  styleUrls: ['./storage-treatment.component.scss'],\r\n})\r\nexport class StorageTreatmentComponent implements OnInit {\r\n  @ViewChild('addTrashTemplate', {read: TemplateRef}) addTrashTemplate: TemplateRef<HTMLElement>;\r\n  @ViewChild('processTrashTemplate', {read: TemplateRef}) processTrashTemplate: TemplateRef<HTMLElement>;\r\n  @ViewChild('leftoverTrashTemplate', {read: TemplateRef}) leftoverTrashTemplate: TemplateRef<HTMLElement>;\r\n  private windowRef: NbWindowRef;\r\n\r\n  @Input() storageTreatment: StorageTreatment[];\r\n  storageTreatment$: Observable<StorageTreatment[]>;\r\n  selectedStorageTreatment: StorageTreatment;\r\n  @Input() storage: Storage[];\r\n  @Output() updateStorageEvent = new EventEmitter<string>();\r\n  selectedTrash: Trash;\r\n\r\n  settings: any = STORAGE_TREATMENT_SETTINGS;\r\n  currentSettings: any = this.settings;\r\n  editSettings: any = STORAGE_EDIT_SETTINGS;\r\n  editIcon: string = 'edit';\r\n\r\n  leftoverTrashCreated: Trash[] = [];\r\n  unfinishedTransactions: Transaction[] = [];\r\n\r\n  constructor(private storageService: StorageService, private windowService: NbWindowService,\r\n              private trashService: TrashService, private transactionsService: TransactionsService,\r\n              private toastrService: ToastrService, private roleService: RoleService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.storageTreatment$ = of(this.storageTreatment);\r\n  }\r\n\r\n  private updateStorage(): void {\r\n    this.updateStorageEvent.emit();\r\n  }\r\n\r\n  edit(): void {\r\n    if (this.currentSettings !== this.editSettings) {\r\n      this.currentSettings = this.editSettings;\r\n      this.editIcon = 'close';\r\n    } else {\r\n      this.currentSettings = this.settings;\r\n      this.editIcon = 'edit';\r\n    }\r\n  }\r\n\r\n  chooseAction(event: any, storage: StorageTreatment) {\r\n    this.selectedStorageTreatment = storage;\r\n    if (event.action === 'add')\r\n      this.openAddTrashWindow(event.data);\r\n    else if (event.action === 'process')\r\n      this.openProcessTrashWindow(event.data);\r\n    else if (event.action === 'leftover')\r\n      this.openLeftoverTrashWindow(event.data);\r\n  }\r\n\r\n  private openAddTrashWindow(trash: Trash) {\r\n    this.selectedTrash = trash;\r\n    this.windowRef = this.windowService.open(this.addTrashTemplate,\r\n      {title: 'Dodaj donetu kolicinu: ' + this.selectedTrash.name});\r\n  }\r\n\r\n  addTrashMethod({trashAmmount: trashAmmount, documentNo: documentNo, companyName: companyName}) {\r\n    if (this.selectedStorageTreatment.maxAmount < this.selectedStorageTreatment.amount + trashAmmount) {\r\n      this.toastrService.showToast('Greška', 'Ne možete da dodate više otpada nego što vaše skladište može da prihvati: '\r\n        + this.selectedStorageTreatment.maxAmount + ' ' + this.selectedStorageTreatment.storageUnit, 'warning');\r\n      return;\r\n    }\r\n    this.selectedTrash.amount += trashAmmount;\r\n    this.trashService.updateTrash(this.selectedTrash, this.selectedStorageTreatment._id, this.selectedTrash._id, '_id',\r\n      companyName, documentNo).subscribe(x => {\r\n      this.updateStorage();\r\n    });\r\n    this.toastrService.showToast('Uspeh',\r\n      'Uspešno ste dodali ' + trashAmmount + ' (kg) ' + this.selectedTrash.name + ' na skladište.',\r\n      'success');\r\n    this.windowRef.close();\r\n    trashAmmount = NaN;\r\n  }\r\n\r\n  private openProcessTrashWindow(trash: Trash) {\r\n    this.selectedTrash = trash;\r\n    this.windowRef = this.windowService.open(this.processTrashTemplate,\r\n      {title: 'Obradi određenu količinu: ' + this.selectedTrash.name});\r\n  }\r\n\r\n  processTrashMethod({\r\n                       selectedTransaction: selectedTransaction,\r\n                       trashAmmount: trashAmmount, trashCreated: trashCreated,\r\n                     }) {\r\n    if (this.selectedStorageTreatment.amount - trashAmmount < 0) {\r\n      this.toastrService.showToast('Greška', 'Ne možete da dodate obradite više otpada nego što vaše skladište ima: '\r\n        + this.selectedStorageTreatment.amount + ' ' + this.selectedStorageTreatment.storageUnit, 'warning');\r\n      return;\r\n    }\r\n    this.selectedTrash.amount -= trashAmmount;\r\n    const companyName = trashCreated ?\r\n      (selectedTransaction.companyName ? selectedTransaction.companyName : selectedTransaction) : '';\r\n    const documentNo = trashCreated ?\r\n      (selectedTransaction.wmdNo ? selectedTransaction.wmdNo : selectedTransaction) : '';\r\n    this.trashService.updateTrash(this.selectedTrash, this.selectedStorageTreatment._id, this.selectedTrash._id, '_id',\r\n      companyName, documentNo).subscribe(x => {\r\n      this.updateStorage();\r\n    });\r\n    if (selectedTransaction !== '-') {\r\n      selectedTransaction.finished = true;\r\n      this.transactionsService.updateTransaction(selectedTransaction, selectedTransaction._id).subscribe(x => {\r\n      });\r\n    }\r\n    this.toastrService.showToast('Uspeh', 'Uspešno ste obradili ' + trashAmmount + ' (kg) '\r\n      + this.selectedTrash.name + ' na skladište.',\r\n      'success');\r\n    this.windowRef.close();\r\n    trashAmmount = NaN;\r\n  }\r\n\r\n  openLeftoverTrashWindow(trash: Trash) {\r\n    this.selectedTrash = trash;\r\n    this.transactionsService.getUnfinishedTransactions(this.selectedTrash._id, this.roleService.getCompanyID())\r\n      .subscribe(x => {\r\n        this.unfinishedTransactions = x;\r\n      });\r\n    this.windowRef = this.windowService.open(this.leftoverTrashTemplate,\r\n      {title: 'Završi proizvodnju preostalog otpada'});\r\n  }\r\n\r\n  leftoverTrashMethod({\r\n                        selectedTransaction: selectedTransaction, leftoverTrashCreated: leftoverTrashCreated,\r\n                        selectedStorage: selectedStorage,\r\n                      }) {\r\n    let canPass = true;\r\n    leftoverTrashCreated.forEach(trashCreated => {\r\n      if (selectedStorage.maxAmount < selectedStorage.amount + trashCreated.amount || !canPass) {\r\n        canPass = false;\r\n        return;\r\n      }\r\n      this.trashService.updateTrash(trashCreated, selectedStorage._id,\r\n        trashCreated.indexNumber, 'indexNumber', undefined, undefined, true).subscribe(x => {\r\n        this.updateStorage();\r\n      });\r\n    });\r\n    if (!canPass) {\r\n      this.toastrService.showToast('Greška', 'Ne možete da dodate više otpada nego što vaše skladište može da prihvati: '\r\n        + selectedStorage.maxAmount + ' ' + selectedStorage.storageUnit, 'warning');\r\n      return;\r\n    }\r\n    selectedTransaction.companyName = null;\r\n    selectedTransaction.wmdNo = null;\r\n    selectedTransaction.finished = true;\r\n    this.transactionsService.updateTransaction(selectedTransaction, selectedTransaction._id).subscribe(x => {\r\n    });\r\n    this.toastrService.showToast('Uspeh', 'Uspesno ste dodali otpade!', 'success');\r\n    this.windowRef.close();\r\n  }\r\n\r\n  updateTrash({newData: trash, confirm: confirm}, storage: StorageTreatment): void {\r\n    this.selectedStorageTreatment = storage;\r\n    try {\r\n      this.trashService.updateTrash(trash, this.selectedStorageTreatment._id, trash._id).subscribe(x => {\r\n        this.updateStorage();\r\n      });\r\n      confirm.resolve();\r\n      this.toastrService.showToast('Uspeh!', 'Uspešno ste uredili ' + trash.name, 'success');\r\n    } catch (err) {\r\n      confirm.reject();\r\n      this.toastrService.showToast('Greška!', 'Došlo je do greške dok ste pokušali da promenite ' + trash.name +\r\n        '. Molimo vas pokušajte kasnije.', 'danger');\r\n    }\r\n  }\r\n\r\n  deleteTrash({data: trash, confirm: confirm}, storage: StorageTreatment): void {\r\n    this.selectedStorageTreatment = storage;\r\n    if (!window.confirm('Da li ste sigurni da želite da obrišete ' + trash.naziv + '?'))\r\n      return;\r\n    try {\r\n      this.trashService.deleteTrash(this.selectedStorageTreatment._id, trash._id).subscribe(x => {\r\n        this.updateStorage();\r\n      });\r\n      confirm.resolve();\r\n      this.toastrService.showToast('Uspeh!', 'Uspešno ste obrisali ' + trash.name, 'success');\r\n    } catch (err) {\r\n      confirm.reject();\r\n      this.toastrService.showToast('Greška!', 'Došlo je do greške dok ste pokušali da obrišete ' + trash.name +\r\n        '. Molimo vas pokušajte kasnije.', 'danger');\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"container-fluid\">\r\n  <div *ngFor=\"let s of storageTreatment$ | async;\">\r\n    <storage-meter [storage]=\"s\"></storage-meter>\r\n    <nb-card>\r\n      <nb-card-header>\r\n        <div class=\"row\">\r\n          <div class=\"col-11\">\r\n            <h2 class=\"text-left\">{{ s?.name }}</h2>\r\n          </div>\r\n          <div class=\"col-1 d-flex justify-content-center align-items-center\">\r\n            <nb-icon class=\"edit-button\" (click)=\"edit()\" [icon]=\"editIcon\"></nb-icon>\r\n          </div>\r\n        </div>\r\n      </nb-card-header>\r\n      <nb-card-body>\r\n        <ng2-smart-table (custom)=\"chooseAction($event, s)\" [settings]=\"currentSettings\"\r\n                         [source]=\"s?.trashes\"\r\n                         (editConfirm)=\"updateTrash($event, s)\"\r\n                         (deleteConfirm)=\"deleteTrash($event, s)\"></ng2-smart-table>\r\n      </nb-card-body>\r\n    </nb-card>\r\n  </div>\r\n</div>\r\n<ng-template #addTrashTemplate>\r\n  <add-trash-popup [type]=\"'treatment'\" [selectedTrash]=\"selectedTrash\"\r\n                   (callAddTrash)=\"addTrashMethod($event)\"></add-trash-popup>\r\n\r\n</ng-template>\r\n\r\n<ng-template #processTrashTemplate>\r\n  <process-trash-popup [selectedTrash]=\"selectedTrash\"\r\n                       (callProcessTrash)=\"processTrashMethod($event)\"></process-trash-popup>\r\n</ng-template>\r\n\r\n<ng-template #leftoverTrashTemplate>\r\n  <leftover-trash-popup [selectedTrash]=\"selectedTrash\"\r\n                        [storageProduction]=\"storage\"\r\n                        (callLeftoverTrash)=\"leftoverTrashMethod($event)\"></leftover-trash-popup>\r\n</ng-template>\r\n","import { Observable } from 'rxjs';\r\nimport { Location } from './location';\r\nimport { Trash } from './trash';\r\nimport { Package } from './package';\r\n\r\nexport interface Storage {\r\n  _id?: string;\r\n  name: string;\r\n  address: {\r\n    location: Location;\r\n    street: string;\r\n  };\r\n  amount: number;\r\n  maxAmount: number;\r\n  storageUnit?: string;\r\n  geolocationNorth?: string[];\r\n  geolocationEast?: string[];\r\n  trashes?: Trash[];\r\n  packages?: Package[];\r\n  __t?: string;\r\n}\r\nexport interface StorageTreatment extends Storage {\r\n  treatment: string;\r\n}\r\nexport interface StorageDump extends Storage {\r\n  dumpType: string;\r\n}\r\nexport interface StorageCache extends Storage {\r\n  cache: string;\r\n}\r\nexport abstract class StorageData {\r\n  abstract createStorage(storage: Storage): Observable<Storage>;\r\n  abstract getStorage(value: string, type: string): Observable<Storage>;\r\n  abstract getStorages(value: string, type: string): Observable<Storage[]>;\r\n  abstract updateStorage(storage: Storage, value: string, type: string): Observable<Storage>;\r\n  abstract deleteStorage(value: string, type: string): Observable<Storage>;\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { NbComponentStatus } from '@nebular/theme';\r\nimport { Storage } from '../../../@core/data/storage';\r\n\r\n@Component({\r\n  selector: 'storage-meter',\r\n  templateUrl: './storage-meter.component.html',\r\n  styleUrls: ['./storage-meter.component.css'],\r\n})\r\nexport class StorageMeterComponent implements OnInit {\r\n  @Input() storage: Storage;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  calculateStatus(): NbComponentStatus {\r\n    if ((this.storage.amount / this.storage.maxAmount) * 100 < 33)\r\n      return 'success';\r\n    else if ((this.storage.amount / this.storage.maxAmount) * 100 < 66)\r\n      return 'warning';\r\n    else\r\n      return 'danger';\r\n  }\r\n\r\n  calculateValue(): number {\r\n    return (this.storage.amount / this.storage.maxAmount) * 100;\r\n  }\r\n\r\n}\r\n","<div class=\"row\">\r\n  <div class=\"col-12 text-center progress-bar-text\">\r\n    <span class=\"badge badge-light\">{{storage.amount}}/{{storage.maxAmount}} ({{storage.storageUnit}})</span>\r\n  </div>\r\n  <div class=\"col-12\">\r\n    <nb-progress-bar [value]=\"calculateValue()\" [status]=\"calculateStatus()\" size=\"large\">\r\n    </nb-progress-bar>\r\n  </div>\r\n</div>\r\n","export const STORAGE_TREATMENT_SETTINGS: any = {\r\n  hideSubHeader: true,\r\n  actions: {\r\n    columnTitle: 'Dodaj otpad/Obradi otpad/Završi tretman',\r\n    position: 'right',\r\n    add: false,\r\n    edit: false,\r\n    delete: false,\r\n    custom: [\r\n      {\r\n        name: 'add',\r\n        title: '<i class=\"fa fa-plus\"></i>',\r\n      },\r\n      {\r\n        name: 'process',\r\n        title:  '<i class=\"fa fa-trash-restore\"></i>',\r\n      },\r\n      {\r\n        name: 'leftover',\r\n        title: '<i class=\"fa fa-exclamation-triangle\"></i>',\r\n      },\r\n    ],\r\n  },\r\n  columns: {\r\n    indexNumber: {\r\n      title: 'Indeksni Broj',\r\n    },\r\n    name: {\r\n      title: 'Naziv',\r\n    },\r\n    desc: {\r\n      title: 'Opis',\r\n    },\r\n    amount: {\r\n      title: 'Kolicina',\r\n    },\r\n  },\r\n};\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from '../../../environments/environment';\r\nimport { Company, CompanyData } from '../data/company';\r\n\r\n@Injectable()\r\nexport class CompanyService extends CompanyData {\r\n  private readonly apiUrl: string;\r\n\r\n  constructor(private http: HttpClient) {\r\n    super();\r\n    this.apiUrl = environment.apiUrl;\r\n  }\r\n\r\n  createCompany(company: Company): Observable<Company> {\r\n    return this.http.post<Company>(this.apiUrl + '/api/company', company);\r\n  }\r\n\r\n  deleteCompany(value: string, type: string = '_id'): Observable<Company> {\r\n    return this.http.delete<Company>(this.apiUrl + '/api/company/one/' + `${type}/${value}`);\r\n  }\r\n\r\n  getCompany(value: string, type: string = '_id'): Observable<Company> {\r\n    return this.http.get<Company>(this.apiUrl + '/api/company/one/' + `${type}/${value}`);\r\n  }\r\n\r\n  getCompanys(value: string = 'all', type: string): Observable<Company[]> {\r\n    return this.http.get<Company[]>(this.apiUrl + '/api/company/many/' + `${type}/${value}`);\r\n  }\r\n\r\n  updateCompany(company: Company, value: string, type: string = '_id'): Observable<Company> {\r\n    return this.http.patch<Company>(this.apiUrl + '/api/company/one/' + `${type}/${value}`, company);\r\n  }\r\n\r\n}\r\n\r\n","import { Component, EventEmitter, Input, OnInit, Output, TemplateRef, ViewChild } from '@angular/core';\r\nimport { NbComponentStatus, NbToastrService, NbWindowRef, NbWindowService } from '@nebular/theme';\r\nimport { Observable, of } from 'rxjs';\r\nimport { Storage } from '../../../@core/data/storage';\r\nimport { Trash } from '../../../@core/data/trash';\r\nimport { ToastrService } from '../../../@core/service/toastr.service';\r\nimport { TrashService } from '../../../@core/service/trash.service';\r\nimport { StorageService } from '../../../@core/service/storage.service';\r\nimport { STORAGE_EDIT_SETTINGS } from '../storage-edit.settings';\r\nimport { STORAGE_PRODUCTION_SETTINGS } from './storage-production.settings';\r\n\r\n@Component({\r\n  selector: 'storage-production',\r\n  templateUrl: './storage-production.component.html',\r\n  styleUrls: ['./storage-production.component.scss'],\r\n})\r\nexport class StorageProductionComponent implements OnInit {\r\n  @ViewChild('addTrashTemplate', {read: TemplateRef}) addTrashTemplate: TemplateRef<HTMLElement>;\r\n  private windowRef: NbWindowRef;\r\n\r\n  @Input() storage: Storage[];\r\n  storage$: Observable<Storage[]>;\r\n  selectedStorage: Storage;\r\n  @Output() updateStorageEvent = new EventEmitter<string>();\r\n  selectedTrash: Trash;\r\n\r\n  settings: any = STORAGE_PRODUCTION_SETTINGS;\r\n  currentSettings: any = this.settings;\r\n  editSettings: any = STORAGE_EDIT_SETTINGS;\r\n  editIcon: string = 'edit';\r\n\r\n  constructor(private storageService: StorageService, private windowService: NbWindowService,\r\n              private trashService: TrashService, private toastrService: ToastrService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.storage$ = of(this.storage);\r\n  }\r\n\r\n  updateStorage(): void {\r\n    this.updateStorageEvent.emit();\r\n    this.storage$ = of(this.storage);\r\n  }\r\n\r\n  edit(): void {\r\n    if (this.currentSettings !== this.editSettings) {\r\n      this.currentSettings = this.editSettings;\r\n      this.editIcon = 'close';\r\n    } else {\r\n      this.currentSettings = this.settings;\r\n      this.editIcon = 'edit';\r\n    }\r\n  }\r\n\r\n  chooseAction(event: any, storage: Storage) {\r\n    this.selectedStorage = storage;\r\n    if (event.action === 'add')\r\n      this.openAddTrashWindow(event.data);\r\n  }\r\n\r\n  private openAddTrashWindow(trash: Trash) {\r\n    this.selectedTrash = trash;\r\n    this.windowRef = this.windowService.open(this.addTrashTemplate,\r\n      {title: 'Dodaj proizvedenu kolicinu: ' + this.selectedTrash.name});\r\n  }\r\n\r\n  addTrashMethod({trashAmmount: trashAmmount}) {\r\n    if (this.selectedStorage.maxAmount < this.selectedStorage.amount + trashAmmount) {\r\n      this.toastrService.showToast('Greška', 'Ne možete da dodate više otpada nego što vaše skladište može da prihvati: '\r\n        + this.selectedStorage.maxAmount + ' ' + this.selectedStorage.storageUnit, 'warning');\r\n      return;\r\n    }\r\n    this.selectedTrash.amount += trashAmmount;\r\n    this.trashService.updateTrash(this.selectedTrash, this.selectedStorage._id, this.selectedTrash._id).subscribe(x => {\r\n      this.updateStorage();\r\n    });\r\n    this.toastrService.showToast('Uspeh',\r\n      'Uspešno ste dodali ' + trashAmmount + ' (kg) ' + this.selectedTrash.name + ' na skladište.',\r\n      'success');\r\n    this.windowRef.close();\r\n    trashAmmount = NaN;\r\n  }\r\n\r\n  updateTrash({newData: trash, confirm: confirm}, storage: Storage): void {\r\n    this.selectedStorage = storage;\r\n    try {\r\n      this.trashService.updateTrash(trash, this.selectedStorage._id, trash._id).subscribe(x => {\r\n        this.updateStorage();\r\n      });\r\n      confirm.resolve();\r\n      this.toastrService.showToast('Uspeh!', 'Uspešno ste uredili ' + trash.name, 'success');\r\n    } catch (err) {\r\n      confirm.reject();\r\n      this.toastrService.showToast('Greška!', 'Došlo je do greške dok ste pokušali da promenite ' + trash.name +\r\n        '. Molimo vas pokušajte kasnije.', 'danger');\r\n    }\r\n  }\r\n\r\n  deleteTrash({data: trash, confirm: confirm}, storage: Storage): void {\r\n    this.selectedStorage = storage;\r\n    if (!window.confirm('Da li ste sigurni da želite da obrišete ' + trash.name + '?'))\r\n      return;\r\n    try {\r\n        this.trashService.deleteTrash(this.selectedStorage._id, trash._id).subscribe(x => {\r\n          this.updateStorage();\r\n        });\r\n      confirm.resolve();\r\n      this.toastrService.showToast('Uspeh!', 'Uspešno ste obrisali ' + trash.naziv, 'success');\r\n    } catch (err) {\r\n      confirm.reject();\r\n      this.toastrService.showToast('Greška!', 'Došlo je do greške dok ste pokušali da obrišete ' + trash.naziv +\r\n        '. Molimo vas pokušajte kasnije.', 'danger');\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"container-fluid\">\r\n  <div *ngFor=\"let s of storage$ | async\">\r\n    <storage-meter [storage]=\"s\"></storage-meter>\r\n    <nb-card>\r\n      <nb-card-header>\r\n        <div class=\"row\">\r\n          <div class=\"col-11\">\r\n            <h2 class=\"text-left\">{{ s?.name }}</h2>\r\n          </div>\r\n          <div class=\"col-1 d-flex justify-content-center align-items-center\">\r\n            <nb-icon class=\"edit-button\" (click)=\"edit()\" [icon]=\"editIcon\"></nb-icon>\r\n          </div>\r\n        </div>\r\n      </nb-card-header>\r\n      <nb-card-body>\r\n        <ng2-smart-table class=\"order-table\" (custom)=\"chooseAction($event, s)\" [settings]=\"currentSettings\"\r\n                         [source]=\"s?.trashes\"\r\n                         (editConfirm)=\"updateTrash($event, s)\"\r\n                         (deleteConfirm)=\"deleteTrash($event, s)\"></ng2-smart-table>\r\n      </nb-card-body>\r\n    </nb-card>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #addTrashTemplate>\r\n  <add-trash-popup [type]=\"'production'\" [selectedTrash]=\"selectedTrash\" (callAddTrash)=\"addTrashMethod($event)\"></add-trash-popup>\r\n</ng-template>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { StorageContainersComponent } from './storage-containers.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: StorageContainersComponent,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class StorageRoutingModule {\r\n}\r\n"]}